<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Pablo Gomez" />

<meta name="date" content="2024-02-28" />

<title>Lab 8 - Mapping data in R</title>

<script src="site_libs/header-attrs-2.25/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="site_libs/leaflet-binding-2.2.0/leaflet.js"></script>
<script src="site_libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="site_libs/leaflet-providers-plugin-2.2.0/leaflet-providers-plugin.js"></script>
<link href="site_libs/leaflet-markercluster-1.0.5/MarkerCluster.css" rel="stylesheet" />
<link href="site_libs/leaflet-markercluster-1.0.5/MarkerCluster.Default.css" rel="stylesheet" />
<script src="site_libs/leaflet-markercluster-1.0.5/leaflet.markercluster.js"></script>
<script src="site_libs/leaflet-markercluster-1.0.5/leaflet.markercluster.freezable.js"></script>
<script src="site_libs/leaflet-markercluster-1.0.5/leaflet.markercluster.layersupport.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"><img id="logo" style="width: 30px;" src="img/cadms-logo.png" /></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Contact
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Instructors.html">
        <span class="fa fa-users"></span>
         
        Instructors
      </a>
    </li>
    <li>
      <a href="https://cadms.vetmed.ucdavis.edu">
        <span class="fa fa-server"></span>
         
        CADMS Website
      </a>
    </li>
    <li>
      <a href="mailto:jpgo@ucdavis.edu">
        <span class="fa fa-envelope"></span>
         
        Email
      </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lab 8 - Mapping data in R</h1>
<h4 class="author">Pablo Gomez</h4>
<h4 class="date">2024-02-28</h4>

</div>


<div id="introduction." class="section level1" number="1">
<h1><span class="header-section-number">1</span> Introduction.</h1>
<p>Spatial data is usually represented in two different ways:</p>
<ul>
<li><em>Vectors</em>: Represent objects in different dimensions.<br />
</li>
<li><em>Raster</em>: Represent continuous values in a grid.</li>
</ul>
<div id="spatial-objects-in-r." class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Spatial objects in
R.</h2>
<p>In this exercise we will introduce to spatial data manipulation in
R.<br />
There are two main formats to manipulate spatial data in R:</p>
<ul>
<li><p><strong>SpatialDataFrame</strong> from the <code>sp</code>
package: This is was the first format introduced in R for spatial data
manipulation, therefore, this package has a lot of dependencies
(packages that uses this format to do other functions) i.e
<code>raster</code>, <code>spdep</code>, <code>spstat</code>.</p></li>
<li><p><strong>Simple features</strong> from the package
<code>sf</code>: This is a more recently developed package, this package
was developed to be more intuitive and friendly with other packages such
as <code>dplyr</code>. The problem with this package is that since its
more recent, some packages doesn’t support this format.</p></li>
</ul>
<p>Working with both formats has its advantages, for spatial data
manipulation <code>sf</code> is more intuitive and powerful, but for
spatial analysis <code>sp</code> is more robust.</p>
<p>Here we will use mostly the <code>sf</code> package, but there will
be times that we will need to switch between formats.</p>
<hr />
</div>
</div>
<div id="vector-data" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Vector data</h1>
<p>Spatial objects can be represented in multiple dimesions:</p>
<ul>
<li><em>Point</em>, is the most basic form of representing spatial data.
It contains only the spatial coordinates of an even or object. For
example, we use this to represent the spatial location of a farm, a
capture of an animal or a case report.<br />
</li>
<li><em>Line</em>, Includes the spatial location of an object and the
direction. we can use lines to represent a road, a river or a
route.<br />
</li>
<li><em>Polygon</em>, Includes the spatial location and geometry of an
object. We use polygon data to represent the shape of a building, lake
or a administrative area.</li>
</ul>
<p>Besides having the location of an object, we can include other
characteristics such as the name, id, temperature recorded, number of
animals in the farm, etc…</p>
<div id="components-of-spatial-datasets" class="section level2"
number="2.1">
<h2><span class="header-section-number">2.1</span> Components of spatial
datasets</h2>
<p>There are multiple ways to loading spatial data into R, we will use
the function <code>st_read()</code> to load the data contained in the
STNet library. lets get started:</p>
<pre class="r"><code># Loading the libraries
library(sf)
library(dplyr)
library(ggplot2)
library(geodata)

# set a default theme for the plots generated
theme_set(theme_bw())</code></pre>
<pre class="r"><code># Get the map for spain ----------
es &lt;- gadm(
  country = &quot;ES&quot;, # ISO code for the country
  level = 3,  # Administrtive level
  path = tempdir(), # output directory to store the data (just use a temp dir for now)
  resolution = 2 # resolution of the data
) %&gt;%
  st_as_sf()

# we will examine the first 6 rows
head(es)</code></pre>
<pre><code>## Simple feature collection with 6 features and 16 fields
## Geometry type: GEOMETRY
## Dimension:     XY
## Bounding box:  xmin: -3.1401 ymin: 35.9374 xmax: -1.8629 ymax: 37.5578
## Geodetic CRS:  WGS 84
##         GID_3 GID_0 COUNTRY   GID_1    NAME_1 NL_NAME_1     GID_2  NAME_2
## 1 ESP.1.1.1_1   ESP   Spain ESP.1_1 Andalucía      &lt;NA&gt; ESP.1.1_1 Almería
## 2 ESP.1.1.2_1   ESP   Spain ESP.1_1 Andalucía      &lt;NA&gt; ESP.1.1_1 Almería
## 3 ESP.1.1.3_1   ESP   Spain ESP.1_1 Andalucía      &lt;NA&gt; ESP.1.1_1 Almería
## 4 ESP.1.1.4_1   ESP   Spain ESP.1_1 Andalucía      &lt;NA&gt; ESP.1.1_1 Almería
## 5 ESP.1.1.5_1   ESP   Spain ESP.1_1 Andalucía      &lt;NA&gt; ESP.1.1_1 Almería
## 6 ESP.1.1.6_1   ESP   Spain ESP.1_1 Andalucía      &lt;NA&gt; ESP.1.1_1 Almería
##   NL_NAME_2    NAME_3 VARNAME_3 NL_NAME_3  TYPE_3 ENGTYPE_3 CC_3 HASC_3
## 1      &lt;NA&gt; n.a. (15)      &lt;NA&gt;      &lt;NA&gt; Comarca   Comarca &lt;NA&gt;   &lt;NA&gt;
## 2      &lt;NA&gt; n.a. (16)      &lt;NA&gt;      &lt;NA&gt; Comarca   Comarca &lt;NA&gt;   &lt;NA&gt;
## 3      &lt;NA&gt; n.a. (17)      &lt;NA&gt;      &lt;NA&gt; Comarca   Comarca &lt;NA&gt;   &lt;NA&gt;
## 4      &lt;NA&gt; n.a. (18)      &lt;NA&gt;      &lt;NA&gt; Comarca   Comarca &lt;NA&gt;   &lt;NA&gt;
## 5      &lt;NA&gt; n.a. (19)      &lt;NA&gt;      &lt;NA&gt; Comarca   Comarca &lt;NA&gt;   &lt;NA&gt;
## 6      &lt;NA&gt; n.a. (20)      &lt;NA&gt;      &lt;NA&gt; Comarca   Comarca &lt;NA&gt;   &lt;NA&gt;
##                         geometry
## 1 POLYGON ((-2.2479 37.2633, ...
## 2 POLYGON ((-2.2558 37.0026, ...
## 3 POLYGON ((-2.5424 36.9749, ...
## 4 POLYGON ((-2.646 36.9152, -...
## 5 MULTIPOLYGON (((-3.0301 35....
## 6 POLYGON ((-2.6571 36.6974, ...</code></pre>
<p>The output shows:<br />
- <code>geometry type</code>: The type of shapefile (either point data,
lines or polygons). - <code>dimension</code> Dimensions used in the
data.<br />
- <code>Bounding bix</code>: The extent of our data.<br />
- <code>CRS</code>: The coordinate reference system.<br />
- And the first 10 features.</p>
<p><strong>What is the coordinate reference system?:</strong> The
coordinate reference system (CRS) is a format to specify the scale for
the coordinates being used to describe the location of our data. The
most commonly used CRS is WGS84, which provides the latitude and
longitude values in a scale of -90 to 90 for latitude and -180 to 180
for longitude. This CRS is ideal to report locations in a map but it is
important to consider that does not takes into account the curvature of
the earth, which is an important factor when we are measuring
distances.</p>
<p>To see the full description of the CRS from a spatial object we can
use the function <code>st_crs()</code>:</p>
<pre class="r"><code># examine the CRS
st_crs(es)</code></pre>
<pre><code>## Coordinate Reference System:
##   User input: WGS 84 
##   wkt:
## GEOGCRS[&quot;WGS 84&quot;,
##     DATUM[&quot;World Geodetic System 1984&quot;,
##         ELLIPSOID[&quot;WGS 84&quot;,6378137,298.257223563,
##             LENGTHUNIT[&quot;metre&quot;,1]]],
##     PRIMEM[&quot;Greenwich&quot;,0,
##         ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     CS[ellipsoidal,2],
##         AXIS[&quot;geodetic latitude (Lat)&quot;,north,
##             ORDER[1],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##         AXIS[&quot;geodetic longitude (Lon)&quot;,east,
##             ORDER[2],
##             ANGLEUNIT[&quot;degree&quot;,0.0174532925199433]],
##     ID[&quot;EPSG&quot;,4326]]</code></pre>
<p>The <code>sf</code> objects are basically a data.frame with extra
information about geometry, projection and CRS. We can plot our polygon
using the same syntax we used previously from <code>ggplot2</code>:</p>
<pre class="r"><code>ggplot() +
  geom_sf(data = es)</code></pre>
<p><img src="lab8_files/figure-html/plot%20the%20country-1.png" width="672" /></p>
<p>The whole data set is a shapefile of Spain aggregated at the
administration level 3. Since we will not be using the whole country for
our analysis, we will filter the data only for the study region. We can
use the same function <code>filter()</code> we are already familiarized
with:</p>
<pre class="r"><code># Filter to our study area
area &lt;- es %&gt;%
  filter(NAME_2 == &quot;Ciudad Real&quot;) %&gt;% # select only ciudad real
  select(community = NAME_1, prov = NAME_2, com = NAME_3) # subset and rename the columns

area</code></pre>
<pre><code>## Simple feature collection with 7 features and 3 fields
## Geometry type: GEOMETRY
## Dimension:     XY
## Bounding box:  xmin: -5.0468 ymin: 38.3428 xmax: -2.6378 ymax: 39.5768
## Geodetic CRS:  WGS 84
##            community        prov       com                       geometry
## 1 Castilla-La Mancha Ciudad Real n.a. (79) POLYGON ((-3.4178 38.6673, ...
## 2 Castilla-La Mancha Ciudad Real n.a. (80) POLYGON ((-3.8327 39.1422, ...
## 3 Castilla-La Mancha Ciudad Real n.a. (81) MULTIPOLYGON (((-3.2321 38....
## 4 Castilla-La Mancha Ciudad Real n.a. (82) POLYGON ((-4.2705 38.9379, ...
## 5 Castilla-La Mancha Ciudad Real n.a. (83) POLYGON ((-4.8769 38.6861, ...
## 6 Castilla-La Mancha Ciudad Real n.a. (84) POLYGON ((-4.7438 39.4894, ...
## 7 Castilla-La Mancha Ciudad Real n.a. (85) POLYGON ((-4.276 38.3479, -...</code></pre>
<p>Our spatial data is in the WGS84 CRS, which is a non-projected
format. Good for locations, bad for measuring distances. The impact of
the projection in our data will be associated with the size of our study
area. In smaller areas the projection wont have a big impact, but as our
study are increases the projection will have a bigger impact when
calculating distances.</p>
<pre class="r"><code># plot the subset
ggplot() +
  geom_sf(data = area)</code></pre>
<p><img src="lab8_files/figure-html/plot%20the%20study%20are-1.png" width="672" /></p>
<p>We can also extract only the data frame without geometry using the
function <code>data.frame()</code>:</p>
<pre class="r"><code>data.frame(area) %&gt;%
  head() # We use this function to see the first 6 only</code></pre>
<pre><code>##            community        prov       com                       geometry
## 1 Castilla-La Mancha Ciudad Real n.a. (79) POLYGON ((-3.4178 38.6673, ...
## 2 Castilla-La Mancha Ciudad Real n.a. (80) POLYGON ((-3.8327 39.1422, ...
## 3 Castilla-La Mancha Ciudad Real n.a. (81) MULTIPOLYGON (((-3.2321 38....
## 4 Castilla-La Mancha Ciudad Real n.a. (82) POLYGON ((-4.2705 38.9379, ...
## 5 Castilla-La Mancha Ciudad Real n.a. (83) POLYGON ((-4.8769 38.6861, ...
## 6 Castilla-La Mancha Ciudad Real n.a. (84) POLYGON ((-4.7438 39.4894, ...</code></pre>
<p>As you can notice, sometimes the data sources can be outdated and
with incomplete names (see column com), for the purpose of this lab we
will just leave it like that.</p>
</div>
<div id="point-data-converting-from-a-data-frame" class="section level2"
number="2.2">
<h2><span class="header-section-number">2.2</span> Point data
(converting from a data frame)</h2>
<p>We can convert a data.frame with X/Y coordinates to a spatial points
if we have the coordinates information, lets try with the dataset we
have been using:</p>
<pre class="r"><code>EJ &lt;- read.csv(&quot;data/dataTb.csv&quot;) # we load the data
# Lets look at the variables
head(EJ)</code></pre>
<pre><code>##   ID_farm       Mun     Com Census Prev Incid    Xcoor   Ycoor Type MOV_year
## 1       1 GUADALMEZ ALMADEN     14 1.04     1 325389.1 4289645 BEEF     0.00
## 2       2 GUADALMEZ ALMADEN    200 0.00     0 327652.2 4291586 BEEF     3.00
## 3       3 GUADALMEZ ALMADEN     38 0.00     0 329353.2 4294230 BEEF     0.50
## 4       4 GUADALMEZ ALMADEN     70 0.00     0 328481.2 4287725 BEEF     0.83
## 5       5 GUADALMEZ ALMADEN     95 0.56     1 326659.1 4286466 BEEF     0.50
## 6       6 GUADALMEZ ALMADEN     19 0.00     0 327837.3 4289723 BEEF     1.33
##   MOV_cen ANIM_mov goat sheep pig MEANfenced
## 1    0.00        0    0     0   0          0
## 2    1.50      119    0     0   0          0
## 3    1.33       14    0     0   0          0
## 4    1.20        5    0     1   0          0
## 5    0.53       26    0     1   0          0
## 6    7.02       21    0     0   0          0</code></pre>
<p>This data has the column <em>Xcoor</em> and <em>Ycoor</em>, which
correspond with x and y for a spatial coordinate. We can use the
function <code>st_as_sf()</code> to do this. Which requires 2 arguments:
<code>coords</code> which are the corresponding names in the data.frame
for the x and y coordinates, <code>crs</code> the coordinate reference
system.</p>
<pre class="r"><code>EJSp &lt;- EJ %&gt;% 
  st_as_sf(
    coords = c(&#39;Xcoor&#39;, &#39;Ycoor&#39;), # the names of the variables with the x and y information
    crs = st_crs(32630) # the CRS for the coordinates
  )

# Lets have a look at our points
ggplot() +
  geom_sf(data = EJSp)</code></pre>
<p><img src="lab8_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p><em>How do I know which projection to use?</em> We can use tools such
as <a href="https://epsg.io/">epsg.io</a> to look for the area we will
be working and identify the most proper projection. In this exercise we
will use the EPSG:32630, which covers this region of the world:</p>
<p><img src="img/w8/esg32630.png" style="width:50.0%"
fig-align="center" /></p>
</div>
<div id="nearest-neighbor" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Nearest neighbor</h2>
<p>A common statistic calculated for point pattern analysis is the
average nearest neighbor distance, which is the average distance of the
nearest point to each observation. A small value of average nearest
neighbor distance would suggest that our observations are clustered, and
a large one that the observations are disperse. Let’s calculate
that:</p>
<pre class="r"><code>dm &lt;- st_distance(EJSp) %&gt;% # get the distance between all pairs of farms
  `diag&lt;-`(NA) # Replace the diagonal of the matrix with NA

EJSp$dmin &lt;- apply(dm, 1, min, na.rm = T) # get the min distance for each farm
EJSp$nn &lt;- apply(dm, 1, which.min) # get which is the nearest farm for each point

# Plot the distribution of the distance by type of farm
ggplot(data = EJSp, aes(x = dmin)) +
  geom_histogram(aes(group = Type, fill = Type)) +
  facet_wrap(~Type, scales = &quot;free&quot;) +
  scale_fill_manual(values = c(&quot;seagreen&quot;, &quot;orchid&quot;))</code></pre>
<p><img src="lab8_files/figure-html/nearest%20neighbor-1.png" width="672" />
Lwts now compute the average nearest neighbor distance by type of
farm:</p>
</div>
</div>
<div id="question-1" class="section level1" number="3">
<h1><span class="header-section-number">3</span> <span
style="color: darkred;">Question 1</span></h1>
<p>Now do the same, but based on their incidence (<em>Inc</em>). Do you
think there is a difference in the average distance between the positive
and negative farms? what kind of test would you use to test this
hypothesis? (hint: remember the tests we talked about on week 5)</p>
</div>
<div id="question-2" class="section level1" number="4">
<h1><span class="header-section-number">4</span> <span
style="color: darkred;">Question 2</span></h1>
<p>Based on the variables you created (<em>dmin</em> and <em>nn</em>),
which is the most remote farm? and how did you conclude that?</p>
<div id="joining-spatial-objects" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Joining spatial
objects</h2>
<p>So far we have two kind of spatial objects, we can extract the
information for the points to the polygons by joining based on where
they intersect, for this we can use the <code>st_join()</code> function.
It is important that the two spatial objects are in the same CRS. We
will check if the CRS for the polygon and points match</p>
<pre class="r"><code># Check it the crs are the same
st_crs(area) == st_crs(EJSp)</code></pre>
<pre><code>## [1] FALSE</code></pre>
<p>Since the CRS are different, we will not be able to join the data.
Lets fix that by transforming the CRS. We can use the function
<code>st_transform()</code> for this task:</p>
<pre class="r"><code># transform the crs
EJSp &lt;- EJSp %&gt;% 
  st_transform(crs = st_crs(area))

# Put the two datasets in a figure
ggplot() +
  geom_sf(data = area) +
  geom_sf(data = EJSp, aes(col = factor(Incid))) +
  scale_color_manual(values = c(&quot;blue3&quot;, &quot;red3&quot;))</code></pre>
<p><img src="lab8_files/figure-html/transform%20CRS-1.png" width="672" /></p>
<p>Now that we have both spatial objects in the same CRS, lets try to
calculate the proportion of farms that are positive for each
administrative unit.</p>
<pre class="r"><code>joinedSp &lt;- st_join(area, EJSp) %&gt;%  # Join the two data sets
  # Now we will get the proportion for each admin
  group_by(com) %&gt;% # group by com
  summarise(n = n(), Incid = sum(Incid, na.rm = T)) %&gt;% # get the numeber of farms and sum of positive
  mutate(prop = Incid/n) # create a variable for the proportion of positive farms

# Make the figure
joinedSp %&gt;% 
  ggplot() +
  geom_sf(aes(fill = prop)) +
  geom_sf_label(aes(label = round(prop, 2)))</code></pre>
<p><img src="lab8_files/figure-html/joining-1.png" width="672" /></p>
</div>
</div>
<div id="question-3" class="section level1" number="5">
<h1><span class="header-section-number">5</span> <span
style="color: darkred;">Question 3:</span></h1>
<p>Which is the comarca (com) with highest proportion of infected?</p>
<div id="raster-data" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Raster data:</h2>
<p>We use raster data to represent continuous values in a field. Raster
are just a grid where each cell has a value and in a grid. The
resolution of a raster just represent the size of the cells from the
grid. We use raster data to represent values such as altitude,
temperature, among other continuous values. Here we will use a raster
for land cover from the study area. This raster was obtained from <a
href="http://diva-gis.org/">diva-gis</a> and you can get it from
canvas.<br />
To manipulate and process rasters, we will use the library
<code>stars</code>, so make sure you have it installed using
<code>install.package("stars")</code>.</p>
<pre class="r"><code>library(stars)
lc &lt;- read_stars(&quot;data/ciudad_rea_lc.tif&quot;)
names(lc)&lt;- &quot;lc&quot; # set the names of the raster attribute</code></pre>
<p>Rasters are basically grids with a specific resolution and a value
associated to each pixel. You can see the information it includes by
printing the object:</p>
<pre class="r"><code>lc</code></pre>
<pre><code>## stars object with 2 dimensions and 1 attribute
## attribute(s):
##     Min. 1st Qu. Median     Mean 3rd Qu. Max.
## lc     2      12     16 13.28225      16   22
## dimension(s):
##   from  to offset     delta refsys point x/y
## x    1 274 -5.014  0.008426 WGS 84 FALSE [x]
## y    1 151  39.58 -0.008426 WGS 84 FALSE [y]</code></pre>
<p>We can use the function <code>geom_stars()</code> to add the data as
a layer in a ggplot.</p>
<pre class="r"><code>ggplot() +
  geom_stars(data = lc)</code></pre>
<p><img src="lab8_files/figure-html/visualize%20the%20raster-1.png" width="672" /></p>
<p>As you can see, the raster values are interpreted as a continuous
variable, which in the case of our raster it’s not. The values in our
raster are defined in the following table:</p>
<p><img src="s/img/w8/8_lc.png" style="width:50.0%"
fig-align="center" /></p>
<p>We can specify that our attribute is a categorical variable, and
assign colors for each category:</p>
<pre class="r"><code># first we need to get how many unique categories we have:
n &lt;- data.frame(lc) %&gt;% pull(lc) %&gt;% unique() %&gt;% length

# Then we can just make the figure with ggplot:
ggplot() +
  geom_stars(
    data = lc,  # we specfy the name of the raster
    aes(fill = factor(lc)) # we specify that we will use lc as a factor
  ) +
  geom_sf(data = area, fill = NA, lwd = 0.8, col = &quot;black&quot;) + # add the polygons on top
  geom_sf(data = EJSp, size = 0.5, alpha = 0.5) # add the points</code></pre>
<p><img src="lab8_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>We can extract the value of a raster to the coordinates of each of
the locations from our point data. To do that we can use the function
<code>st_extract()</code></p>
<pre class="r"><code># In this example I am extracting the values 
st_extract(lc, EJSp) %&gt;% 
  head() # and showing the first 6 observations</code></pre>
<pre><code>## Simple feature collection with 6 features and 1 field
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -5.009012 ymin: 38.70986 xmax: -4.96456 ymax: 38.78031
## Geodetic CRS:  WGS 84
##   lc                   geometry
## 1 16 POINT (-5.009012 38.73824)
## 2 16 POINT (-4.983472 38.75616)
## 3 12  POINT (-4.96456 38.78031)
## 4 16 POINT (-4.972979 38.72155)
## 5 16 POINT (-4.993612 38.70986)
## 6 16 POINT (-4.980879 38.73941)</code></pre>
<p>The result is a spatial points dataset with a column with the value
for each of the points (rows).</p>
</div>
</div>
<div id="question-4" class="section level1" number="6">
<h1><span class="header-section-number">6</span> <span
style="color: darkred;">Question 4:</span></h1>
<p>What type of land cover is the most common among the extracted
locations? (hint: use the function <code>st_extract()</code> and then
<code>count()</code>). Provide the lc code and name in your answer. If
you were testing a hypothesis to evaluate the association with land
cover and location of the farms, which test would you use to calculate a
p-value?</p>
</div>
<div id="cartography" class="section level1" number="7">
<h1><span class="header-section-number">7</span> Cartography</h1>
<p>Now that we are familiarized with spatial data and visualization, we
can go more detailed into making a pretty map.</p>
<p>First lets aggregate all the capture regarding the year, so we can
create a map with the points corresponding to the number of
captures:</p>
<pre class="r"><code>ggplot() +
  geom_sf(data = area) +
  geom_sf(data = EJSp, aes(size = Prev), alpha = 0.4)</code></pre>
<p><img src="lab8_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div id="facets" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> Facets</h2>
<pre class="r"><code>map &lt;- ggplot() +
  geom_sf(data = area) +
  geom_sf(data = EJSp, aes(size = Prev, col = Type), alpha = 0.4) +
  facet_wrap(~Type) +
  scale_color_manual(values = c(&quot;seagreen&quot;, &quot;orchid&quot;))

map</code></pre>
<p><img src="lab8_files/figure-html/facets-1.png" width="672" /></p>
</div>
<div id="additional-legends" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> Additional
legends</h2>
<p>Often we want to show additional legends in our maps to provide more
context of the study area. Two common legends used are a scale bar and a
arrow that points where is the north. The library <code>ggspatial</code>
has some functions to annotate our map and provide these legends.</p>
<p>First we will add a scale bar using the function
<code>annotation_scale()</code>. Notice that since we already have a map
saved in the container Maps, we can just use the same object and add the
additional line of code for our scale bar, connecting with the
<code>+</code> operator:</p>
<pre class="r"><code>library(ggspatial)

map &lt;- map +
  annotation_scale(
    location = &#39;br&#39;, # Location of the scale bar
    width_hint = 0.25, # how wide the scale bar will be
    line_width = 0.2, # width of the outline
    height = unit(.03, &quot;in&quot;) # how tall the scale bar will be
  )

map</code></pre>
<p><img src="lab8_files/figure-html/additional%20legend-1.png" width="672" /></p>
<p>We can add other additional legends like a north arrow, we will add
one with the function <code>annotation_north_arrow()</code> from the
<code>ggspatial</code> library, so make sure you have it installed:</p>
<pre class="r"><code># If you dont have ggspatial installed, you can use:
# install.packages(&quot;ggspatial&quot;)
map &lt;- map +
  annotation_north_arrow(location = &quot;tr&quot;, which_north = &quot;true&quot;, style = north_arrow_fancy_orienteering(text_size = 5), 
                         height = unit(.6, &quot;in&quot;),
                         width = unit(.6, &quot;in&quot;),
                         pad_x = unit(0.05, &quot;in&quot;), pad_y = unit(0.05, &quot;in&quot;))

map</code></pre>
<p><img src="lab8_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<!---
# Inset maps


```r
bbox <- st_bbox(area)

inset <- ggplot() +
  geom_sf(data = es) +
  geom_sf(data = st_as_sfc(bbox), col = "red", fill = NA, lwd = 1) +
  theme_void()

map + 
  annotation_custom(
    ggplotGrob(
      inset 
    ),
    xmin = bbox[1], xmax = bbox[1] + 2, ymin = bbox[2], ymax = bbox[2] + 2
  )
```

<img src="lab8_files/figure-html/unnamed-chunk-11-1.png" width="672" />

--->
</div>
</div>
<div id="interactive-maps" class="section level1" number="8">
<h1><span class="header-section-number">8</span> Interactive maps</h1>
<pre class="r"><code>library(leaflet)</code></pre>
<p><a href="https://rstudio.github.io/leaflet/">Leaflet</a> is an open
source library for interactive maps implemented in R. The library allows
you to use different type of objects such as simple features (sf format)
or simple data.frames with lat/long columns. Lets make sure we have the
library installed and then load it.</p>
<pre class="r"><code># install.packages(&quot;leaflet&quot;) # If you haven&#39;t, install the library
library(leaflet)</code></pre>
<div id="point-data" class="section level2" number="8.1">
<h2><span class="header-section-number">8.1</span> Point data</h2>
<p>The library is similar to <code>ggplot2</code> in the sense that we
first use the function <code>leaflet()</code> to call an empty canvas
and then we add layers of information.<br />
Lets crate an empty map with the point data we previously used. Leaflet
expects by default data in Lat Lon, so we will have to make some changes
to our data, which was previously projected in another CRS. Lets first
create a subset of the positive farms to use:</p>
<pre class="r"><code># Create a subset of positive farms
ejp &lt;- EJSp %&gt;% 
  filter(Incid &gt; 0)

leaflet() %&gt;% # create the empty map
  addMarkers(data = ejp) # put the first layer</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-c555e7c554023834887e" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-c555e7c554023834887e">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addMarkers","args":[[38.738235572065,38.70985857751873,38.98412480529439,39.01119744947722,38.80679673520338,39.02245042244282,38.99638396519319,38.96228283302399,38.97932013507306,39.00061722913741,38.97632130459453,38.99679509981094,38.99393160426027,38.9846893277763,38.97219499818402,38.97838718383682,38.98219719318539,38.96168472500391,38.96659443375043,39.05000653610205,38.97148567916017,38.98368011303222,39.02025225522851,38.98593491726329,39.0044743776388,38.96808164872305,38.97934655334604,39.0289450816933,38.98955495447,38.76759132587692,38.68721700813811,39.03140948473631,39.08221818977682,38.84644430850779,39.02363299660743,39.05495567619496,39.05712389815766,39.00737340953219,38.61241107125756,38.68176206036753,38.69763830629226,38.87288783575671,38.57202658551341,38.60418982566414,38.99613107148338,38.61742731329971,38.67681071034747,38.57667276049457,38.61833284907399,38.86762724999793,39.27263529679512,38.5825507623531,38.62697268412002,38.63619683400329,38.63204318039162,38.61623686608232,38.64128404294894,39.00940406549384,38.64394213356863,38.62758973734584,38.66485929618913,38.63315075034949,39.08929918982817,38.62144848834707,38.99074003942156,38.5918867864293,38.61551912865828,39.08573656931161,39.06798865154366,38.97905379289005,38.58601395172104,38.65350951170753,38.84615187102733,38.71864499608209,38.76689021519423,38.87116227176085,38.6024317601625,38.62119659906653,38.78664796040147,38.81024447558943,38.80534307720699,38.64930199925749,38.72754583601742,39.19708262112734,38.70685429134765,38.65060460712976,38.7896312322798,39.02533464840356,38.91340928129137,38.86325012253365,38.6123668263813,38.63384112366892,38.58843756554808,38.90671861427047,38.59506243296934,38.59106481787493,38.83665786424135,38.61570056713776,38.86527190862272,38.85839109227707,38.63457753167162,38.60452454181971,38.66210683199656,38.5926065729547,39.00015845884415,38.57566168979543,38.56087247902232,38.58492094113083,38.88343065010648,38.38744921658483,39.51499965436302,38.39863917545285,38.62529732635183,39.27950778956102,39.22209716402628,39.25701019584773,39.24273326794724,39.49262428561907,39.2638290663723,39.26065372912338,38.37006315121192,39.20582191617093,38.7102609181171,38.90778228867773,39.17562372839818,38.52105869282833,39.15782903163684,38.53647666149263,38.56012097787132,38.35865181751682,39.22764218224025,39.21390548007142,39.2306814296198,39.24749450690248,39.22830623648992,38.99306477958463,38.76467440611409,39.19792129189081,39.18819205325867,39.17164111329631,39.26028857490304,38.57483300203682,38.9056363949026,38.77004866801838,39.48508557948036,38.72193121794018,38.66049964254718,38.64276199365082,39.2947209674255,39.12831807487498,38.86518157346439,38.50279388987747,39.44195465821352,38.63157962983412,39.28585026207759,38.91878832000145,38.70665433351983,38.53687295073552,38.5504713354269,39.57503092267004,39.18921431945295,38.5072583773343,39.30676504596769,39.32880821339571,39.15718033094866,39.28143282537763,39.34069946717299,39.33310031355222,39.05659845869648,39.05984719122611,38.62527977674176,38.39912129646046,39.32520032001439,38.3963554822947,39.2433480325313,38.3973017382189,38.40058394408364,38.66227346854274,38.93021760663142,39.21498152412902,38.97371127639595,38.99561161059646,38.52384960068353,38.97128857831786,39.23599523342673,39.21951962574945,38.9388768667767,39.05924415683962,38.51752738876137,38.49992429686881,38.54956871790394,38.7078059644795,39.25002802615511,39.19626546780761],[-5.009012232869915,-4.993612409048099,-4.894628114803871,-4.918976503588656,-4.911746836881013,-4.872933337652766,-4.90542469055903,-4.886278128441651,-4.893117549496073,-4.864646673759422,-4.891152988791896,-4.883370628373494,-4.895912241769273,-4.860873060476337,-4.865144348360104,-4.884334344657106,-4.893067628291886,-4.884198749587535,-4.874278098379738,-4.886013858627948,-4.873650869893154,-4.854153583857187,-4.861488313587112,-4.834870203966142,-4.881651520461312,-4.864830146011573,-4.854902474286067,-4.83179368820634,-4.84854931786946,-4.817604266696517,-4.827221528877709,-4.822644967676702,-4.828399156975374,-4.776050778555891,-4.802664245387901,-4.784469265490661,-4.780168591423271,-4.768897433822564,-4.755299706017699,-4.744473750803381,-4.731077211934669,-4.745100854653529,-4.737351439806289,-4.717211198759411,-4.74012987567136,-4.730007836414308,-4.725028105010312,-4.716363093307885,-4.717565753982844,-4.713102092573454,-4.711710430235693,-4.686877943905531,-4.674616378371288,-4.644952397352964,-4.653994726390565,-4.613077345991669,-4.616695891241304,-4.628917135065882,-4.620607656122667,-4.623015108331383,-4.625942713314856,-4.602218186164606,-4.62998833821997,-4.627058314605595,-4.605832989244848,-4.573626432665711,-4.582305664299199,-4.57461349140035,-4.584530371778841,-4.595513916002822,-4.55471599760826,-4.566716136823946,-4.539537520562176,-4.531625734560777,-4.526460053612417,-4.534653004889536,-4.498258104828987,-4.520332776127936,-4.502006309498709,-4.482355141678313,-4.514017178207347,-4.487721863314574,-4.50905574096094,-4.499315829239385,-4.512077252887798,-4.487224513658001,-4.476401089038903,-4.478169638843022,-4.509571217143371,-4.490795905774238,-4.475648084030506,-4.456390863789529,-4.457470899840244,-4.465008594090851,-4.449242658772135,-4.450259082376529,-4.45159331849815,-4.453090981713746,-4.447491812604659,-4.479013841628511,-4.447603416272393,-4.4637625545432,-4.463852515229748,-4.436624643989822,-4.418513178741652,-4.396597635746615,-4.395594920307655,-4.374721463818404,-4.390261006517218,-4.367255583580917,-4.395698602315049,-4.357685347176478,-4.359914718801235,-4.349703318745829,-4.346814154993225,-4.346592420734632,-4.322688205306385,-4.363617711061242,-4.363412308843334,-4.346120736439306,-4.335211573661815,-4.309206185986514,-4.338263745859547,-4.324359132184279,-4.343532001716227,-4.301050905451952,-4.348905859790542,-4.318184881365618,-4.300305956204594,-4.300717256334536,-4.315828142309543,-4.293099937752244,-4.321793729397419,-4.301050003573266,-4.2997936088953,-4.291980254530769,-4.296778248613348,-4.294454962146762,-4.258845585409263,-4.281618370229027,-4.269346393754387,-4.241052428359271,-4.254081248935685,-4.245514524219432,-4.261560447333552,-4.23072745878374,-4.226661496167306,-4.233516476576363,-4.23473728235026,-4.220466219386688,-4.222402018538318,-4.230210468232458,-4.219943414397145,-4.194754115932756,-4.171814393093673,-4.203614017031203,-4.155918245893821,-4.162731955753251,-4.165486381357733,-4.160845098123522,-4.1670370064453,-4.129334409207723,-4.122932723483933,-4.153589902931255,-4.134174102147752,-4.143214013184854,-4.087744949278644,-4.079829057389727,-4.07018530128251,-4.05843248209231,-4.030850952180119,-3.956177259044763,-3.948914393327482,-3.957540081003851,-3.954288827904965,-3.94098080141348,-3.938408201437078,-3.922943443637314,-3.906437215189164,-3.888412830692547,-3.898860073534359,-3.902296575646498,-3.860236003495292,-3.887416465289951,-3.789652106005473,-3.770849031860702,-3.666932286929155,-3.214390622956101,-3.178603573724783,-3.034420514072882,-2.818676621073133,-2.712046175198414,-4.340618270956019,-4.337375886420838],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.35865181751682,39.57503092267004],"lng":[-5.009012232869915,-2.712046175198414]}},"evals":[],"jsHooks":[]}</script>
<p>Now we have an empty canvas with some markers. We could add a base
shapefile to have a better sense of the space, but leaflet also provides
some base maps for us to use, lets add one.</p>
</div>
<div id="basemaps" class="section level2" number="8.2">
<h2><span class="header-section-number">8.2</span> Basemaps</h2>
<p>We will use a base map from open street maps. If you want to explore
other layers, you can start by typing <code>providers$</code> and use
the auto complete function in R to select other base maps.</p>
<pre class="r"><code>leaflet() %&gt;% 
  addProviderTiles(providers$OpenStreetMap) %&gt;% 
  addMarkers(data = ejp) # put the first layer</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-9752257b790e03ea3ffb" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-9752257b790e03ea3ffb">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[38.738235572065,38.70985857751873,38.98412480529439,39.01119744947722,38.80679673520338,39.02245042244282,38.99638396519319,38.96228283302399,38.97932013507306,39.00061722913741,38.97632130459453,38.99679509981094,38.99393160426027,38.9846893277763,38.97219499818402,38.97838718383682,38.98219719318539,38.96168472500391,38.96659443375043,39.05000653610205,38.97148567916017,38.98368011303222,39.02025225522851,38.98593491726329,39.0044743776388,38.96808164872305,38.97934655334604,39.0289450816933,38.98955495447,38.76759132587692,38.68721700813811,39.03140948473631,39.08221818977682,38.84644430850779,39.02363299660743,39.05495567619496,39.05712389815766,39.00737340953219,38.61241107125756,38.68176206036753,38.69763830629226,38.87288783575671,38.57202658551341,38.60418982566414,38.99613107148338,38.61742731329971,38.67681071034747,38.57667276049457,38.61833284907399,38.86762724999793,39.27263529679512,38.5825507623531,38.62697268412002,38.63619683400329,38.63204318039162,38.61623686608232,38.64128404294894,39.00940406549384,38.64394213356863,38.62758973734584,38.66485929618913,38.63315075034949,39.08929918982817,38.62144848834707,38.99074003942156,38.5918867864293,38.61551912865828,39.08573656931161,39.06798865154366,38.97905379289005,38.58601395172104,38.65350951170753,38.84615187102733,38.71864499608209,38.76689021519423,38.87116227176085,38.6024317601625,38.62119659906653,38.78664796040147,38.81024447558943,38.80534307720699,38.64930199925749,38.72754583601742,39.19708262112734,38.70685429134765,38.65060460712976,38.7896312322798,39.02533464840356,38.91340928129137,38.86325012253365,38.6123668263813,38.63384112366892,38.58843756554808,38.90671861427047,38.59506243296934,38.59106481787493,38.83665786424135,38.61570056713776,38.86527190862272,38.85839109227707,38.63457753167162,38.60452454181971,38.66210683199656,38.5926065729547,39.00015845884415,38.57566168979543,38.56087247902232,38.58492094113083,38.88343065010648,38.38744921658483,39.51499965436302,38.39863917545285,38.62529732635183,39.27950778956102,39.22209716402628,39.25701019584773,39.24273326794724,39.49262428561907,39.2638290663723,39.26065372912338,38.37006315121192,39.20582191617093,38.7102609181171,38.90778228867773,39.17562372839818,38.52105869282833,39.15782903163684,38.53647666149263,38.56012097787132,38.35865181751682,39.22764218224025,39.21390548007142,39.2306814296198,39.24749450690248,39.22830623648992,38.99306477958463,38.76467440611409,39.19792129189081,39.18819205325867,39.17164111329631,39.26028857490304,38.57483300203682,38.9056363949026,38.77004866801838,39.48508557948036,38.72193121794018,38.66049964254718,38.64276199365082,39.2947209674255,39.12831807487498,38.86518157346439,38.50279388987747,39.44195465821352,38.63157962983412,39.28585026207759,38.91878832000145,38.70665433351983,38.53687295073552,38.5504713354269,39.57503092267004,39.18921431945295,38.5072583773343,39.30676504596769,39.32880821339571,39.15718033094866,39.28143282537763,39.34069946717299,39.33310031355222,39.05659845869648,39.05984719122611,38.62527977674176,38.39912129646046,39.32520032001439,38.3963554822947,39.2433480325313,38.3973017382189,38.40058394408364,38.66227346854274,38.93021760663142,39.21498152412902,38.97371127639595,38.99561161059646,38.52384960068353,38.97128857831786,39.23599523342673,39.21951962574945,38.9388768667767,39.05924415683962,38.51752738876137,38.49992429686881,38.54956871790394,38.7078059644795,39.25002802615511,39.19626546780761],[-5.009012232869915,-4.993612409048099,-4.894628114803871,-4.918976503588656,-4.911746836881013,-4.872933337652766,-4.90542469055903,-4.886278128441651,-4.893117549496073,-4.864646673759422,-4.891152988791896,-4.883370628373494,-4.895912241769273,-4.860873060476337,-4.865144348360104,-4.884334344657106,-4.893067628291886,-4.884198749587535,-4.874278098379738,-4.886013858627948,-4.873650869893154,-4.854153583857187,-4.861488313587112,-4.834870203966142,-4.881651520461312,-4.864830146011573,-4.854902474286067,-4.83179368820634,-4.84854931786946,-4.817604266696517,-4.827221528877709,-4.822644967676702,-4.828399156975374,-4.776050778555891,-4.802664245387901,-4.784469265490661,-4.780168591423271,-4.768897433822564,-4.755299706017699,-4.744473750803381,-4.731077211934669,-4.745100854653529,-4.737351439806289,-4.717211198759411,-4.74012987567136,-4.730007836414308,-4.725028105010312,-4.716363093307885,-4.717565753982844,-4.713102092573454,-4.711710430235693,-4.686877943905531,-4.674616378371288,-4.644952397352964,-4.653994726390565,-4.613077345991669,-4.616695891241304,-4.628917135065882,-4.620607656122667,-4.623015108331383,-4.625942713314856,-4.602218186164606,-4.62998833821997,-4.627058314605595,-4.605832989244848,-4.573626432665711,-4.582305664299199,-4.57461349140035,-4.584530371778841,-4.595513916002822,-4.55471599760826,-4.566716136823946,-4.539537520562176,-4.531625734560777,-4.526460053612417,-4.534653004889536,-4.498258104828987,-4.520332776127936,-4.502006309498709,-4.482355141678313,-4.514017178207347,-4.487721863314574,-4.50905574096094,-4.499315829239385,-4.512077252887798,-4.487224513658001,-4.476401089038903,-4.478169638843022,-4.509571217143371,-4.490795905774238,-4.475648084030506,-4.456390863789529,-4.457470899840244,-4.465008594090851,-4.449242658772135,-4.450259082376529,-4.45159331849815,-4.453090981713746,-4.447491812604659,-4.479013841628511,-4.447603416272393,-4.4637625545432,-4.463852515229748,-4.436624643989822,-4.418513178741652,-4.396597635746615,-4.395594920307655,-4.374721463818404,-4.390261006517218,-4.367255583580917,-4.395698602315049,-4.357685347176478,-4.359914718801235,-4.349703318745829,-4.346814154993225,-4.346592420734632,-4.322688205306385,-4.363617711061242,-4.363412308843334,-4.346120736439306,-4.335211573661815,-4.309206185986514,-4.338263745859547,-4.324359132184279,-4.343532001716227,-4.301050905451952,-4.348905859790542,-4.318184881365618,-4.300305956204594,-4.300717256334536,-4.315828142309543,-4.293099937752244,-4.321793729397419,-4.301050003573266,-4.2997936088953,-4.291980254530769,-4.296778248613348,-4.294454962146762,-4.258845585409263,-4.281618370229027,-4.269346393754387,-4.241052428359271,-4.254081248935685,-4.245514524219432,-4.261560447333552,-4.23072745878374,-4.226661496167306,-4.233516476576363,-4.23473728235026,-4.220466219386688,-4.222402018538318,-4.230210468232458,-4.219943414397145,-4.194754115932756,-4.171814393093673,-4.203614017031203,-4.155918245893821,-4.162731955753251,-4.165486381357733,-4.160845098123522,-4.1670370064453,-4.129334409207723,-4.122932723483933,-4.153589902931255,-4.134174102147752,-4.143214013184854,-4.087744949278644,-4.079829057389727,-4.07018530128251,-4.05843248209231,-4.030850952180119,-3.956177259044763,-3.948914393327482,-3.957540081003851,-3.954288827904965,-3.94098080141348,-3.938408201437078,-3.922943443637314,-3.906437215189164,-3.888412830692547,-3.898860073534359,-3.902296575646498,-3.860236003495292,-3.887416465289951,-3.789652106005473,-3.770849031860702,-3.666932286929155,-3.214390622956101,-3.178603573724783,-3.034420514072882,-2.818676621073133,-2.712046175198414,-4.340618270956019,-4.337375886420838],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.35865181751682,39.57503092267004],"lng":[-5.009012232869915,-2.712046175198414]}},"evals":[],"jsHooks":[]}</script>
<p>There is also this website: <a
href="https://leaflet-extras.github.io/leaflet-providers/preview/">Providers
demo</a>, that shows in real time some of the available provides for
baes maps in leaflet.</p>
</div>
<div id="labels-and-popups" class="section level2" number="8.3">
<h2><span class="header-section-number">8.3</span> Labels and
popups</h2>
<p>We can add text and different attributes to our markers using labels
and popups. Labels will show when we hover over our point, and popups
will show when we click on them. YOu can use both in the same map,
labels are meant to show short text and popups to show longer text.</p>
<p>Lets create a label for our markers:</p>
<pre class="r"><code> # Creating a label
leaflet() %&gt;% 
  addProviderTiles(providers$OpenStreetMap) %&gt;% 
  addMarkers(
    data = ejp, # This is the data
    label = ~Prev # The variable we are using for the label
    )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-493cc83243387966ff68" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-493cc83243387966ff68">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[38.738235572065,38.70985857751873,38.98412480529439,39.01119744947722,38.80679673520338,39.02245042244282,38.99638396519319,38.96228283302399,38.97932013507306,39.00061722913741,38.97632130459453,38.99679509981094,38.99393160426027,38.9846893277763,38.97219499818402,38.97838718383682,38.98219719318539,38.96168472500391,38.96659443375043,39.05000653610205,38.97148567916017,38.98368011303222,39.02025225522851,38.98593491726329,39.0044743776388,38.96808164872305,38.97934655334604,39.0289450816933,38.98955495447,38.76759132587692,38.68721700813811,39.03140948473631,39.08221818977682,38.84644430850779,39.02363299660743,39.05495567619496,39.05712389815766,39.00737340953219,38.61241107125756,38.68176206036753,38.69763830629226,38.87288783575671,38.57202658551341,38.60418982566414,38.99613107148338,38.61742731329971,38.67681071034747,38.57667276049457,38.61833284907399,38.86762724999793,39.27263529679512,38.5825507623531,38.62697268412002,38.63619683400329,38.63204318039162,38.61623686608232,38.64128404294894,39.00940406549384,38.64394213356863,38.62758973734584,38.66485929618913,38.63315075034949,39.08929918982817,38.62144848834707,38.99074003942156,38.5918867864293,38.61551912865828,39.08573656931161,39.06798865154366,38.97905379289005,38.58601395172104,38.65350951170753,38.84615187102733,38.71864499608209,38.76689021519423,38.87116227176085,38.6024317601625,38.62119659906653,38.78664796040147,38.81024447558943,38.80534307720699,38.64930199925749,38.72754583601742,39.19708262112734,38.70685429134765,38.65060460712976,38.7896312322798,39.02533464840356,38.91340928129137,38.86325012253365,38.6123668263813,38.63384112366892,38.58843756554808,38.90671861427047,38.59506243296934,38.59106481787493,38.83665786424135,38.61570056713776,38.86527190862272,38.85839109227707,38.63457753167162,38.60452454181971,38.66210683199656,38.5926065729547,39.00015845884415,38.57566168979543,38.56087247902232,38.58492094113083,38.88343065010648,38.38744921658483,39.51499965436302,38.39863917545285,38.62529732635183,39.27950778956102,39.22209716402628,39.25701019584773,39.24273326794724,39.49262428561907,39.2638290663723,39.26065372912338,38.37006315121192,39.20582191617093,38.7102609181171,38.90778228867773,39.17562372839818,38.52105869282833,39.15782903163684,38.53647666149263,38.56012097787132,38.35865181751682,39.22764218224025,39.21390548007142,39.2306814296198,39.24749450690248,39.22830623648992,38.99306477958463,38.76467440611409,39.19792129189081,39.18819205325867,39.17164111329631,39.26028857490304,38.57483300203682,38.9056363949026,38.77004866801838,39.48508557948036,38.72193121794018,38.66049964254718,38.64276199365082,39.2947209674255,39.12831807487498,38.86518157346439,38.50279388987747,39.44195465821352,38.63157962983412,39.28585026207759,38.91878832000145,38.70665433351983,38.53687295073552,38.5504713354269,39.57503092267004,39.18921431945295,38.5072583773343,39.30676504596769,39.32880821339571,39.15718033094866,39.28143282537763,39.34069946717299,39.33310031355222,39.05659845869648,39.05984719122611,38.62527977674176,38.39912129646046,39.32520032001439,38.3963554822947,39.2433480325313,38.3973017382189,38.40058394408364,38.66227346854274,38.93021760663142,39.21498152412902,38.97371127639595,38.99561161059646,38.52384960068353,38.97128857831786,39.23599523342673,39.21951962574945,38.9388768667767,39.05924415683962,38.51752738876137,38.49992429686881,38.54956871790394,38.7078059644795,39.25002802615511,39.19626546780761],[-5.009012232869915,-4.993612409048099,-4.894628114803871,-4.918976503588656,-4.911746836881013,-4.872933337652766,-4.90542469055903,-4.886278128441651,-4.893117549496073,-4.864646673759422,-4.891152988791896,-4.883370628373494,-4.895912241769273,-4.860873060476337,-4.865144348360104,-4.884334344657106,-4.893067628291886,-4.884198749587535,-4.874278098379738,-4.886013858627948,-4.873650869893154,-4.854153583857187,-4.861488313587112,-4.834870203966142,-4.881651520461312,-4.864830146011573,-4.854902474286067,-4.83179368820634,-4.84854931786946,-4.817604266696517,-4.827221528877709,-4.822644967676702,-4.828399156975374,-4.776050778555891,-4.802664245387901,-4.784469265490661,-4.780168591423271,-4.768897433822564,-4.755299706017699,-4.744473750803381,-4.731077211934669,-4.745100854653529,-4.737351439806289,-4.717211198759411,-4.74012987567136,-4.730007836414308,-4.725028105010312,-4.716363093307885,-4.717565753982844,-4.713102092573454,-4.711710430235693,-4.686877943905531,-4.674616378371288,-4.644952397352964,-4.653994726390565,-4.613077345991669,-4.616695891241304,-4.628917135065882,-4.620607656122667,-4.623015108331383,-4.625942713314856,-4.602218186164606,-4.62998833821997,-4.627058314605595,-4.605832989244848,-4.573626432665711,-4.582305664299199,-4.57461349140035,-4.584530371778841,-4.595513916002822,-4.55471599760826,-4.566716136823946,-4.539537520562176,-4.531625734560777,-4.526460053612417,-4.534653004889536,-4.498258104828987,-4.520332776127936,-4.502006309498709,-4.482355141678313,-4.514017178207347,-4.487721863314574,-4.50905574096094,-4.499315829239385,-4.512077252887798,-4.487224513658001,-4.476401089038903,-4.478169638843022,-4.509571217143371,-4.490795905774238,-4.475648084030506,-4.456390863789529,-4.457470899840244,-4.465008594090851,-4.449242658772135,-4.450259082376529,-4.45159331849815,-4.453090981713746,-4.447491812604659,-4.479013841628511,-4.447603416272393,-4.4637625545432,-4.463852515229748,-4.436624643989822,-4.418513178741652,-4.396597635746615,-4.395594920307655,-4.374721463818404,-4.390261006517218,-4.367255583580917,-4.395698602315049,-4.357685347176478,-4.359914718801235,-4.349703318745829,-4.346814154993225,-4.346592420734632,-4.322688205306385,-4.363617711061242,-4.363412308843334,-4.346120736439306,-4.335211573661815,-4.309206185986514,-4.338263745859547,-4.324359132184279,-4.343532001716227,-4.301050905451952,-4.348905859790542,-4.318184881365618,-4.300305956204594,-4.300717256334536,-4.315828142309543,-4.293099937752244,-4.321793729397419,-4.301050003573266,-4.2997936088953,-4.291980254530769,-4.296778248613348,-4.294454962146762,-4.258845585409263,-4.281618370229027,-4.269346393754387,-4.241052428359271,-4.254081248935685,-4.245514524219432,-4.261560447333552,-4.23072745878374,-4.226661496167306,-4.233516476576363,-4.23473728235026,-4.220466219386688,-4.222402018538318,-4.230210468232458,-4.219943414397145,-4.194754115932756,-4.171814393093673,-4.203614017031203,-4.155918245893821,-4.162731955753251,-4.165486381357733,-4.160845098123522,-4.1670370064453,-4.129334409207723,-4.122932723483933,-4.153589902931255,-4.134174102147752,-4.143214013184854,-4.087744949278644,-4.079829057389727,-4.07018530128251,-4.05843248209231,-4.030850952180119,-3.956177259044763,-3.948914393327482,-3.957540081003851,-3.954288827904965,-3.94098080141348,-3.938408201437078,-3.922943443637314,-3.906437215189164,-3.888412830692547,-3.898860073534359,-3.902296575646498,-3.860236003495292,-3.887416465289951,-3.789652106005473,-3.770849031860702,-3.666932286929155,-3.214390622956101,-3.178603573724783,-3.034420514072882,-2.818676621073133,-2.712046175198414,-4.340618270956019,-4.337375886420838],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},null,null,null,null,["1.04","0.56","1.57","13.64","2.29","3.61","1.26","0.56","0.44","2.92","3.78","2.48","2.39","6.67","0.3","0.2","1.85","0.77","4.08","0.35","1.39","2.53","3.23","0.93","2.35","3.69","1.21","0.54","2.38","7.22","0.93","2.5","8.47","1.04","1.38","1.57","1.67","0.37","0.82","0.43","0.21","2.4","0.98","0.35","1.31","0.55","2.26","5.09","4.35","2.93","6.45","7.13","1.45","2.62","0.92","1.76","1.98","2.49","1.18","0.85","0.93","0.6","2.11","3.17","0.77","4.78","5.26","1.23","0.19","3.17","4.81","5.67","1.74","4.49","0.39","1.85","4.89","2.71","3.71","0.83","1.33","1.87","0.94","0.23","0.91","2.48","4.51","1.2","0.88","0.48","3.59","1.62","2.67","0.62","1.53","1.14","2.02","2.27","4.51","6.04","6.24","4.91","2.56","0.32","6.31","3.09","1.47","1.15","9.56","0.31","2.59","0.82","4.55","8.89","11.35","8.91","9.93","4.4","8.89","8.33","2.54","0.21","6.41","0.14","0.45","8.33","0.44","1.24","0.34","7.44","10.43","2.68","2.33","1.82","3.12","2.3","1.54","2.44","0.75","0.12","0.57","3.02","6.8","5.7","1.38","4.18","6.64","8.82","2.76","0.54","3.56","10.36","1.57","8.32","3.33","2","0.71","2.83","0.21","1.5","3.21","1.98","3","1.95","0.98","14.17","4.35","3.07","5.19","2.12","9","0.69","0.14","2.56","2.38","1.19","1.8","2.17","5.36","3.75","10.96","5.59","4.95","5.43","1.75","2.48","2.02","1.14","1.29","0.4","0.32","1.01","8.87","11.88"],{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.35865181751682,39.57503092267004],"lng":[-5.009012232869915,-2.712046175198414]}},"evals":[],"jsHooks":[]}</script>
<p>Now lets create a popup for our map.</p>
<pre class="r"><code># Creating a popup
leaflet() %&gt;% 
  addProviderTiles(providers$OpenStreetMap) %&gt;% 
  addMarkers(
    data = ejp,
    # We can format the popup using some html tags
    popup = ~paste(
      &#39;Com:&#39;, Com,
      &quot;&lt;br&gt;Prevalence:&quot;, Prev,
      &quot;&lt;br&gt;Census:&quot;, Census
    ) # The variable we are using for the label
  )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-17df5d644bafa17e0238" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-17df5d644bafa17e0238">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[38.738235572065,38.70985857751873,38.98412480529439,39.01119744947722,38.80679673520338,39.02245042244282,38.99638396519319,38.96228283302399,38.97932013507306,39.00061722913741,38.97632130459453,38.99679509981094,38.99393160426027,38.9846893277763,38.97219499818402,38.97838718383682,38.98219719318539,38.96168472500391,38.96659443375043,39.05000653610205,38.97148567916017,38.98368011303222,39.02025225522851,38.98593491726329,39.0044743776388,38.96808164872305,38.97934655334604,39.0289450816933,38.98955495447,38.76759132587692,38.68721700813811,39.03140948473631,39.08221818977682,38.84644430850779,39.02363299660743,39.05495567619496,39.05712389815766,39.00737340953219,38.61241107125756,38.68176206036753,38.69763830629226,38.87288783575671,38.57202658551341,38.60418982566414,38.99613107148338,38.61742731329971,38.67681071034747,38.57667276049457,38.61833284907399,38.86762724999793,39.27263529679512,38.5825507623531,38.62697268412002,38.63619683400329,38.63204318039162,38.61623686608232,38.64128404294894,39.00940406549384,38.64394213356863,38.62758973734584,38.66485929618913,38.63315075034949,39.08929918982817,38.62144848834707,38.99074003942156,38.5918867864293,38.61551912865828,39.08573656931161,39.06798865154366,38.97905379289005,38.58601395172104,38.65350951170753,38.84615187102733,38.71864499608209,38.76689021519423,38.87116227176085,38.6024317601625,38.62119659906653,38.78664796040147,38.81024447558943,38.80534307720699,38.64930199925749,38.72754583601742,39.19708262112734,38.70685429134765,38.65060460712976,38.7896312322798,39.02533464840356,38.91340928129137,38.86325012253365,38.6123668263813,38.63384112366892,38.58843756554808,38.90671861427047,38.59506243296934,38.59106481787493,38.83665786424135,38.61570056713776,38.86527190862272,38.85839109227707,38.63457753167162,38.60452454181971,38.66210683199656,38.5926065729547,39.00015845884415,38.57566168979543,38.56087247902232,38.58492094113083,38.88343065010648,38.38744921658483,39.51499965436302,38.39863917545285,38.62529732635183,39.27950778956102,39.22209716402628,39.25701019584773,39.24273326794724,39.49262428561907,39.2638290663723,39.26065372912338,38.37006315121192,39.20582191617093,38.7102609181171,38.90778228867773,39.17562372839818,38.52105869282833,39.15782903163684,38.53647666149263,38.56012097787132,38.35865181751682,39.22764218224025,39.21390548007142,39.2306814296198,39.24749450690248,39.22830623648992,38.99306477958463,38.76467440611409,39.19792129189081,39.18819205325867,39.17164111329631,39.26028857490304,38.57483300203682,38.9056363949026,38.77004866801838,39.48508557948036,38.72193121794018,38.66049964254718,38.64276199365082,39.2947209674255,39.12831807487498,38.86518157346439,38.50279388987747,39.44195465821352,38.63157962983412,39.28585026207759,38.91878832000145,38.70665433351983,38.53687295073552,38.5504713354269,39.57503092267004,39.18921431945295,38.5072583773343,39.30676504596769,39.32880821339571,39.15718033094866,39.28143282537763,39.34069946717299,39.33310031355222,39.05659845869648,39.05984719122611,38.62527977674176,38.39912129646046,39.32520032001439,38.3963554822947,39.2433480325313,38.3973017382189,38.40058394408364,38.66227346854274,38.93021760663142,39.21498152412902,38.97371127639595,38.99561161059646,38.52384960068353,38.97128857831786,39.23599523342673,39.21951962574945,38.9388768667767,39.05924415683962,38.51752738876137,38.49992429686881,38.54956871790394,38.7078059644795,39.25002802615511,39.19626546780761],[-5.009012232869915,-4.993612409048099,-4.894628114803871,-4.918976503588656,-4.911746836881013,-4.872933337652766,-4.90542469055903,-4.886278128441651,-4.893117549496073,-4.864646673759422,-4.891152988791896,-4.883370628373494,-4.895912241769273,-4.860873060476337,-4.865144348360104,-4.884334344657106,-4.893067628291886,-4.884198749587535,-4.874278098379738,-4.886013858627948,-4.873650869893154,-4.854153583857187,-4.861488313587112,-4.834870203966142,-4.881651520461312,-4.864830146011573,-4.854902474286067,-4.83179368820634,-4.84854931786946,-4.817604266696517,-4.827221528877709,-4.822644967676702,-4.828399156975374,-4.776050778555891,-4.802664245387901,-4.784469265490661,-4.780168591423271,-4.768897433822564,-4.755299706017699,-4.744473750803381,-4.731077211934669,-4.745100854653529,-4.737351439806289,-4.717211198759411,-4.74012987567136,-4.730007836414308,-4.725028105010312,-4.716363093307885,-4.717565753982844,-4.713102092573454,-4.711710430235693,-4.686877943905531,-4.674616378371288,-4.644952397352964,-4.653994726390565,-4.613077345991669,-4.616695891241304,-4.628917135065882,-4.620607656122667,-4.623015108331383,-4.625942713314856,-4.602218186164606,-4.62998833821997,-4.627058314605595,-4.605832989244848,-4.573626432665711,-4.582305664299199,-4.57461349140035,-4.584530371778841,-4.595513916002822,-4.55471599760826,-4.566716136823946,-4.539537520562176,-4.531625734560777,-4.526460053612417,-4.534653004889536,-4.498258104828987,-4.520332776127936,-4.502006309498709,-4.482355141678313,-4.514017178207347,-4.487721863314574,-4.50905574096094,-4.499315829239385,-4.512077252887798,-4.487224513658001,-4.476401089038903,-4.478169638843022,-4.509571217143371,-4.490795905774238,-4.475648084030506,-4.456390863789529,-4.457470899840244,-4.465008594090851,-4.449242658772135,-4.450259082376529,-4.45159331849815,-4.453090981713746,-4.447491812604659,-4.479013841628511,-4.447603416272393,-4.4637625545432,-4.463852515229748,-4.436624643989822,-4.418513178741652,-4.396597635746615,-4.395594920307655,-4.374721463818404,-4.390261006517218,-4.367255583580917,-4.395698602315049,-4.357685347176478,-4.359914718801235,-4.349703318745829,-4.346814154993225,-4.346592420734632,-4.322688205306385,-4.363617711061242,-4.363412308843334,-4.346120736439306,-4.335211573661815,-4.309206185986514,-4.338263745859547,-4.324359132184279,-4.343532001716227,-4.301050905451952,-4.348905859790542,-4.318184881365618,-4.300305956204594,-4.300717256334536,-4.315828142309543,-4.293099937752244,-4.321793729397419,-4.301050003573266,-4.2997936088953,-4.291980254530769,-4.296778248613348,-4.294454962146762,-4.258845585409263,-4.281618370229027,-4.269346393754387,-4.241052428359271,-4.254081248935685,-4.245514524219432,-4.261560447333552,-4.23072745878374,-4.226661496167306,-4.233516476576363,-4.23473728235026,-4.220466219386688,-4.222402018538318,-4.230210468232458,-4.219943414397145,-4.194754115932756,-4.171814393093673,-4.203614017031203,-4.155918245893821,-4.162731955753251,-4.165486381357733,-4.160845098123522,-4.1670370064453,-4.129334409207723,-4.122932723483933,-4.153589902931255,-4.134174102147752,-4.143214013184854,-4.087744949278644,-4.079829057389727,-4.07018530128251,-4.05843248209231,-4.030850952180119,-3.956177259044763,-3.948914393327482,-3.957540081003851,-3.954288827904965,-3.94098080141348,-3.938408201437078,-3.922943443637314,-3.906437215189164,-3.888412830692547,-3.898860073534359,-3.902296575646498,-3.860236003495292,-3.887416465289951,-3.789652106005473,-3.770849031860702,-3.666932286929155,-3.214390622956101,-3.178603573724783,-3.034420514072882,-2.818676621073133,-2.712046175198414,-4.340618270956019,-4.337375886420838],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Com: ALMADEN <br>Prevalence: 1.04 <br>Census: 14","Com: ALMADEN <br>Prevalence: 0.56 <br>Census: 95","Com: ALMADEN <br>Prevalence: 1.57 <br>Census: 54","Com: ALMADEN <br>Prevalence: 13.64 <br>Census: 17","Com: ALMADEN <br>Prevalence: 2.29 <br>Census: 143","Com: ALMADEN <br>Prevalence: 3.61 <br>Census: 126","Com: ALMADEN <br>Prevalence: 1.26 <br>Census: 54","Com: ALMADEN <br>Prevalence: 0.56 <br>Census: 29","Com: ALMADEN <br>Prevalence: 0.44 <br>Census: 97","Com: ALMADEN <br>Prevalence: 2.92 <br>Census: 100","Com: ALMADEN <br>Prevalence: 3.78 <br>Census: 39","Com: ALMADEN <br>Prevalence: 2.48 <br>Census: 34","Com: ALMADEN <br>Prevalence: 2.39 <br>Census: 34","Com: ALMADEN <br>Prevalence: 6.67 <br>Census: 23","Com: ALMADEN <br>Prevalence: 0.3 <br>Census: 51","Com: ALMADEN <br>Prevalence: 0.2 <br>Census: 82","Com: ALMADEN <br>Prevalence: 1.85 <br>Census: 93","Com: ALMADEN <br>Prevalence: 0.77 <br>Census: 89","Com: ALMADEN <br>Prevalence: 4.08 <br>Census: 68","Com: ALMADEN <br>Prevalence: 0.35 <br>Census: 96","Com: ALMADEN <br>Prevalence: 1.39 <br>Census: 50","Com: ALMADEN <br>Prevalence: 2.53 <br>Census: 116","Com: ALMADEN <br>Prevalence: 3.23 <br>Census: 26","Com: ALMADEN <br>Prevalence: 0.93 <br>Census: 133","Com: ALMADEN <br>Prevalence: 2.35 <br>Census: 56","Com: ALMADEN <br>Prevalence: 3.69 <br>Census: 68","Com: ALMADEN <br>Prevalence: 1.21 <br>Census: 81","Com: ALMADEN <br>Prevalence: 0.54 <br>Census: 30","Com: ALMADEN <br>Prevalence: 2.38 <br>Census: 24","Com: ALMADEN <br>Prevalence: 7.22 <br>Census: 22","Com: ALMADEN <br>Prevalence: 0.93 <br>Census: 29","Com: ALMADEN <br>Prevalence: 2.5 <br>Census: 21","Com: ALMADEN <br>Prevalence: 8.47 <br>Census: 77","Com: ALMADEN <br>Prevalence: 1.04 <br>Census: 27","Com: ALMADEN <br>Prevalence: 1.38 <br>Census: 157","Com: ALMADEN <br>Prevalence: 1.57 <br>Census: 129","Com: ALMADEN <br>Prevalence: 1.67 <br>Census: 128","Com: ALMADEN <br>Prevalence: 0.37 <br>Census: 37","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.82 <br>Census: 571","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.43 <br>Census: 134","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.21 <br>Census: 313","Com: ALMADEN <br>Prevalence: 2.4 <br>Census: 212","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.98 <br>Census: 43","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.35 <br>Census: 54","Com: ALMADEN <br>Prevalence: 1.31 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.55 <br>Census: 78","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.26 <br>Census: 140","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.09 <br>Census: 41","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.35 <br>Census: 23","Com: ALMADEN <br>Prevalence: 2.93 <br>Census: 84","Com: HORCAJO DE LOS MONTES <br>Prevalence: 6.45 <br>Census: 33","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 7.13 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.45 <br>Census: 88","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.62 <br>Census: 292","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.92 <br>Census: 122","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.76 <br>Census: 112","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.98 <br>Census: 105","Com: ALMADEN <br>Prevalence: 2.49 <br>Census: 60","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.18 <br>Census: 188","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.85 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.93 <br>Census: 235","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.6 <br>Census: 91","Com: PIEDRABUENA <br>Prevalence: 2.11 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.17 <br>Census: 117","Com: PIEDRABUENA <br>Prevalence: 0.77 <br>Census: 169","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.78 <br>Census: 142","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.26 <br>Census: 150","Com: PIEDRABUENA <br>Prevalence: 1.23 <br>Census: 39","Com: PIEDRABUENA <br>Prevalence: 0.19 <br>Census: 76","Com: ALMADEN <br>Prevalence: 3.17 <br>Census: 60","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.81 <br>Census: 73","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.67 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.74 <br>Census: 201","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.49 <br>Census: 285","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.39 <br>Census: 124","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.85 <br>Census: 170","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.89 <br>Census: 166","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.71 <br>Census: 324","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.71 <br>Census: 100","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.83 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.33 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.87 <br>Census: 158","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.94 <br>Census: 49","Com: PIEDRABUENA <br>Prevalence: 0.23 <br>Census: 146","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.91 <br>Census: 168","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.48 <br>Census: 83","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.51 <br>Census: 44","Com: PIEDRABUENA <br>Prevalence: 1.2 <br>Census: 819","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.88 <br>Census: 116","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.48 <br>Census: 117","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.59 <br>Census: 160","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.62 <br>Census: 411","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.67 <br>Census: 26","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.62 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.53 <br>Census: 92","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.14 <br>Census: 73","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.02 <br>Census: 94","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.27 <br>Census: 591","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.51 <br>Census: 87","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.04 <br>Census: 38","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.24 <br>Census: 35","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.91 <br>Census: 91","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.56 <br>Census: 30","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.32 <br>Census: 144","Com: PIEDRABUENA <br>Prevalence: 6.31 <br>Census: 136","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.09 <br>Census: 551","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.47 <br>Census: 118","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.15 <br>Census: 59","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 9.56 <br>Census: 33","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.31 <br>Census: 47","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.59 <br>Census: 92","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.82 <br>Census: 61","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.55 <br>Census: 72","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.89 <br>Census: 47","Com: HORCAJO DE LOS MONTES <br>Prevalence: 11.35 <br>Census: 43","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.91 <br>Census: 49","Com: HORCAJO DE LOS MONTES <br>Prevalence: 9.93 <br>Census: 163","Com: HORCAJO DE LOS MONTES <br>Prevalence: 4.4 <br>Census: 155","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.89 <br>Census: 146","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.33 <br>Census: 80","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.54 <br>Census: 77","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.21 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.41 <br>Census: 62","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.14 <br>Census: 356","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.45 <br>Census: 101","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.33 <br>Census: 21","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.44 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.24 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.34 <br>Census: 193","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 7.44 <br>Census: 25","Com: HORCAJO DE LOS MONTES <br>Prevalence: 10.43 <br>Census: 130","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.68 <br>Census: 220","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.33 <br>Census: 158","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.82 <br>Census: 90","Com: HORCAJO DE LOS MONTES <br>Prevalence: 3.12 <br>Census: 85","Com: PIEDRABUENA <br>Prevalence: 2.3 <br>Census: 224","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.54 <br>Census: 15","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.44 <br>Census: 34","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.75 <br>Census: 330","Com: MALAGON <br>Prevalence: 0.12 <br>Census: 144","Com: MALAGON <br>Prevalence: 0.57 <br>Census: 117","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.02 <br>Census: 234","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.8 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.7 <br>Census: 39","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.38 <br>Census: 625","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.18 <br>Census: 148","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.64 <br>Census: 18","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.82 <br>Census: 17","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.76 <br>Census: 248","Com: MALAGON <br>Prevalence: 0.54 <br>Census: 97","Com: CIUDAD REAL <br>Prevalence: 3.56 <br>Census: 262","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 10.36 <br>Census: 48","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.57 <br>Census: 443","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.32 <br>Census: 52","Com: MALAGON <br>Prevalence: 3.33 <br>Census: 50","Com: PIEDRABUENA <br>Prevalence: 2 <br>Census: 129","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.71 <br>Census: 56","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.83 <br>Census: 137","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.21 <br>Census: 76","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.5 <br>Census: 99","Com: MALAGON <br>Prevalence: 3.21 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.98 <br>Census: 207","Com: MALAGON <br>Prevalence: 3 <br>Census: 86","Com: MALAGON <br>Prevalence: 1.95 <br>Census: 91","Com: MALAGON <br>Prevalence: 0.98 <br>Census: 133","Com: MALAGON <br>Prevalence: 14.17 <br>Census: 58","Com: MALAGON <br>Prevalence: 4.35 <br>Census: 158","Com: MALAGON <br>Prevalence: 3.07 <br>Census: 124","Com: CIUDAD REAL <br>Prevalence: 5.19 <br>Census: 13","Com: CIUDAD REAL <br>Prevalence: 2.12 <br>Census: 13","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 9 <br>Census: 78","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.69 <br>Census: 23","Com: MALAGON <br>Prevalence: 0.14 <br>Census: 93","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.56 <br>Census: 27","Com: MALAGON <br>Prevalence: 2.38 <br>Census: 13","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.19 <br>Census: 23","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.8 <br>Census: 96","Com: CALZADA DE CALATRAVA <br>Prevalence: 2.17 <br>Census: 50","Com: CIUDAD REAL <br>Prevalence: 5.36 <br>Census: 16","Com: MALAGON <br>Prevalence: 3.75 <br>Census: 37","Com: CIUDAD REAL <br>Prevalence: 10.96 <br>Census: 74","Com: CIUDAD REAL <br>Prevalence: 5.59 <br>Census: 44","Com: CALZADA DE CALATRAVA <br>Prevalence: 4.95 <br>Census: 177","Com: CIUDAD REAL <br>Prevalence: 5.43 <br>Census: 115","Com: MALAGON <br>Prevalence: 1.75 <br>Census: 45","Com: MALAGON <br>Prevalence: 2.48 <br>Census: 57","Com: CALZADA DE CALATRAVA <br>Prevalence: 2.02 <br>Census: 28","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.14 <br>Census: 50","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 1.29 <br>Census: 406","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 0.4 <br>Census: 188","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 0.32 <br>Census: 364","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 1.01 <br>Census: 42","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.87 <br>Census: 49","Com: HORCAJO DE LOS MONTES <br>Prevalence: 11.88 <br>Census: 127"],null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.35865181751682,39.57503092267004],"lng":[-5.009012232869915,-2.712046175198414]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="creating-clusters" class="section level2" number="8.4">
<h2><span class="header-section-number">8.4</span> Creating
clusters</h2>
<p>Leaflet has a very convenient feature that allows you to create
clusters with the point data. This clusters count the number of markers
in an area and change when you zoom or click into the clusters</p>
<pre class="r"><code>leaflet() %&gt;% 
  addProviderTiles(providers$OpenStreetMap) %&gt;% 
  addMarkers(
    data = ejp,
    # We can format the popup using some html tags
    popup = ~paste(
      &#39;Com:&#39;, Com,
      &quot;&lt;br&gt;Prevalence:&quot;, Prev,
      &quot;&lt;br&gt;Census:&quot;, Census
    ), # The variable we are using for the label
    clusterOptions = markerClusterOptions() # THIS IS THE OPTION FOR CLUSTERS
  )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-8eba8c27ffff4c158c71" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-8eba8c27ffff4c158c71">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[38.738235572065,38.70985857751873,38.98412480529439,39.01119744947722,38.80679673520338,39.02245042244282,38.99638396519319,38.96228283302399,38.97932013507306,39.00061722913741,38.97632130459453,38.99679509981094,38.99393160426027,38.9846893277763,38.97219499818402,38.97838718383682,38.98219719318539,38.96168472500391,38.96659443375043,39.05000653610205,38.97148567916017,38.98368011303222,39.02025225522851,38.98593491726329,39.0044743776388,38.96808164872305,38.97934655334604,39.0289450816933,38.98955495447,38.76759132587692,38.68721700813811,39.03140948473631,39.08221818977682,38.84644430850779,39.02363299660743,39.05495567619496,39.05712389815766,39.00737340953219,38.61241107125756,38.68176206036753,38.69763830629226,38.87288783575671,38.57202658551341,38.60418982566414,38.99613107148338,38.61742731329971,38.67681071034747,38.57667276049457,38.61833284907399,38.86762724999793,39.27263529679512,38.5825507623531,38.62697268412002,38.63619683400329,38.63204318039162,38.61623686608232,38.64128404294894,39.00940406549384,38.64394213356863,38.62758973734584,38.66485929618913,38.63315075034949,39.08929918982817,38.62144848834707,38.99074003942156,38.5918867864293,38.61551912865828,39.08573656931161,39.06798865154366,38.97905379289005,38.58601395172104,38.65350951170753,38.84615187102733,38.71864499608209,38.76689021519423,38.87116227176085,38.6024317601625,38.62119659906653,38.78664796040147,38.81024447558943,38.80534307720699,38.64930199925749,38.72754583601742,39.19708262112734,38.70685429134765,38.65060460712976,38.7896312322798,39.02533464840356,38.91340928129137,38.86325012253365,38.6123668263813,38.63384112366892,38.58843756554808,38.90671861427047,38.59506243296934,38.59106481787493,38.83665786424135,38.61570056713776,38.86527190862272,38.85839109227707,38.63457753167162,38.60452454181971,38.66210683199656,38.5926065729547,39.00015845884415,38.57566168979543,38.56087247902232,38.58492094113083,38.88343065010648,38.38744921658483,39.51499965436302,38.39863917545285,38.62529732635183,39.27950778956102,39.22209716402628,39.25701019584773,39.24273326794724,39.49262428561907,39.2638290663723,39.26065372912338,38.37006315121192,39.20582191617093,38.7102609181171,38.90778228867773,39.17562372839818,38.52105869282833,39.15782903163684,38.53647666149263,38.56012097787132,38.35865181751682,39.22764218224025,39.21390548007142,39.2306814296198,39.24749450690248,39.22830623648992,38.99306477958463,38.76467440611409,39.19792129189081,39.18819205325867,39.17164111329631,39.26028857490304,38.57483300203682,38.9056363949026,38.77004866801838,39.48508557948036,38.72193121794018,38.66049964254718,38.64276199365082,39.2947209674255,39.12831807487498,38.86518157346439,38.50279388987747,39.44195465821352,38.63157962983412,39.28585026207759,38.91878832000145,38.70665433351983,38.53687295073552,38.5504713354269,39.57503092267004,39.18921431945295,38.5072583773343,39.30676504596769,39.32880821339571,39.15718033094866,39.28143282537763,39.34069946717299,39.33310031355222,39.05659845869648,39.05984719122611,38.62527977674176,38.39912129646046,39.32520032001439,38.3963554822947,39.2433480325313,38.3973017382189,38.40058394408364,38.66227346854274,38.93021760663142,39.21498152412902,38.97371127639595,38.99561161059646,38.52384960068353,38.97128857831786,39.23599523342673,39.21951962574945,38.9388768667767,39.05924415683962,38.51752738876137,38.49992429686881,38.54956871790394,38.7078059644795,39.25002802615511,39.19626546780761],[-5.009012232869915,-4.993612409048099,-4.894628114803871,-4.918976503588656,-4.911746836881013,-4.872933337652766,-4.90542469055903,-4.886278128441651,-4.893117549496073,-4.864646673759422,-4.891152988791896,-4.883370628373494,-4.895912241769273,-4.860873060476337,-4.865144348360104,-4.884334344657106,-4.893067628291886,-4.884198749587535,-4.874278098379738,-4.886013858627948,-4.873650869893154,-4.854153583857187,-4.861488313587112,-4.834870203966142,-4.881651520461312,-4.864830146011573,-4.854902474286067,-4.83179368820634,-4.84854931786946,-4.817604266696517,-4.827221528877709,-4.822644967676702,-4.828399156975374,-4.776050778555891,-4.802664245387901,-4.784469265490661,-4.780168591423271,-4.768897433822564,-4.755299706017699,-4.744473750803381,-4.731077211934669,-4.745100854653529,-4.737351439806289,-4.717211198759411,-4.74012987567136,-4.730007836414308,-4.725028105010312,-4.716363093307885,-4.717565753982844,-4.713102092573454,-4.711710430235693,-4.686877943905531,-4.674616378371288,-4.644952397352964,-4.653994726390565,-4.613077345991669,-4.616695891241304,-4.628917135065882,-4.620607656122667,-4.623015108331383,-4.625942713314856,-4.602218186164606,-4.62998833821997,-4.627058314605595,-4.605832989244848,-4.573626432665711,-4.582305664299199,-4.57461349140035,-4.584530371778841,-4.595513916002822,-4.55471599760826,-4.566716136823946,-4.539537520562176,-4.531625734560777,-4.526460053612417,-4.534653004889536,-4.498258104828987,-4.520332776127936,-4.502006309498709,-4.482355141678313,-4.514017178207347,-4.487721863314574,-4.50905574096094,-4.499315829239385,-4.512077252887798,-4.487224513658001,-4.476401089038903,-4.478169638843022,-4.509571217143371,-4.490795905774238,-4.475648084030506,-4.456390863789529,-4.457470899840244,-4.465008594090851,-4.449242658772135,-4.450259082376529,-4.45159331849815,-4.453090981713746,-4.447491812604659,-4.479013841628511,-4.447603416272393,-4.4637625545432,-4.463852515229748,-4.436624643989822,-4.418513178741652,-4.396597635746615,-4.395594920307655,-4.374721463818404,-4.390261006517218,-4.367255583580917,-4.395698602315049,-4.357685347176478,-4.359914718801235,-4.349703318745829,-4.346814154993225,-4.346592420734632,-4.322688205306385,-4.363617711061242,-4.363412308843334,-4.346120736439306,-4.335211573661815,-4.309206185986514,-4.338263745859547,-4.324359132184279,-4.343532001716227,-4.301050905451952,-4.348905859790542,-4.318184881365618,-4.300305956204594,-4.300717256334536,-4.315828142309543,-4.293099937752244,-4.321793729397419,-4.301050003573266,-4.2997936088953,-4.291980254530769,-4.296778248613348,-4.294454962146762,-4.258845585409263,-4.281618370229027,-4.269346393754387,-4.241052428359271,-4.254081248935685,-4.245514524219432,-4.261560447333552,-4.23072745878374,-4.226661496167306,-4.233516476576363,-4.23473728235026,-4.220466219386688,-4.222402018538318,-4.230210468232458,-4.219943414397145,-4.194754115932756,-4.171814393093673,-4.203614017031203,-4.155918245893821,-4.162731955753251,-4.165486381357733,-4.160845098123522,-4.1670370064453,-4.129334409207723,-4.122932723483933,-4.153589902931255,-4.134174102147752,-4.143214013184854,-4.087744949278644,-4.079829057389727,-4.07018530128251,-4.05843248209231,-4.030850952180119,-3.956177259044763,-3.948914393327482,-3.957540081003851,-3.954288827904965,-3.94098080141348,-3.938408201437078,-3.922943443637314,-3.906437215189164,-3.888412830692547,-3.898860073534359,-3.902296575646498,-3.860236003495292,-3.887416465289951,-3.789652106005473,-3.770849031860702,-3.666932286929155,-3.214390622956101,-3.178603573724783,-3.034420514072882,-2.818676621073133,-2.712046175198414,-4.340618270956019,-4.337375886420838],null,null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Com: ALMADEN <br>Prevalence: 1.04 <br>Census: 14","Com: ALMADEN <br>Prevalence: 0.56 <br>Census: 95","Com: ALMADEN <br>Prevalence: 1.57 <br>Census: 54","Com: ALMADEN <br>Prevalence: 13.64 <br>Census: 17","Com: ALMADEN <br>Prevalence: 2.29 <br>Census: 143","Com: ALMADEN <br>Prevalence: 3.61 <br>Census: 126","Com: ALMADEN <br>Prevalence: 1.26 <br>Census: 54","Com: ALMADEN <br>Prevalence: 0.56 <br>Census: 29","Com: ALMADEN <br>Prevalence: 0.44 <br>Census: 97","Com: ALMADEN <br>Prevalence: 2.92 <br>Census: 100","Com: ALMADEN <br>Prevalence: 3.78 <br>Census: 39","Com: ALMADEN <br>Prevalence: 2.48 <br>Census: 34","Com: ALMADEN <br>Prevalence: 2.39 <br>Census: 34","Com: ALMADEN <br>Prevalence: 6.67 <br>Census: 23","Com: ALMADEN <br>Prevalence: 0.3 <br>Census: 51","Com: ALMADEN <br>Prevalence: 0.2 <br>Census: 82","Com: ALMADEN <br>Prevalence: 1.85 <br>Census: 93","Com: ALMADEN <br>Prevalence: 0.77 <br>Census: 89","Com: ALMADEN <br>Prevalence: 4.08 <br>Census: 68","Com: ALMADEN <br>Prevalence: 0.35 <br>Census: 96","Com: ALMADEN <br>Prevalence: 1.39 <br>Census: 50","Com: ALMADEN <br>Prevalence: 2.53 <br>Census: 116","Com: ALMADEN <br>Prevalence: 3.23 <br>Census: 26","Com: ALMADEN <br>Prevalence: 0.93 <br>Census: 133","Com: ALMADEN <br>Prevalence: 2.35 <br>Census: 56","Com: ALMADEN <br>Prevalence: 3.69 <br>Census: 68","Com: ALMADEN <br>Prevalence: 1.21 <br>Census: 81","Com: ALMADEN <br>Prevalence: 0.54 <br>Census: 30","Com: ALMADEN <br>Prevalence: 2.38 <br>Census: 24","Com: ALMADEN <br>Prevalence: 7.22 <br>Census: 22","Com: ALMADEN <br>Prevalence: 0.93 <br>Census: 29","Com: ALMADEN <br>Prevalence: 2.5 <br>Census: 21","Com: ALMADEN <br>Prevalence: 8.47 <br>Census: 77","Com: ALMADEN <br>Prevalence: 1.04 <br>Census: 27","Com: ALMADEN <br>Prevalence: 1.38 <br>Census: 157","Com: ALMADEN <br>Prevalence: 1.57 <br>Census: 129","Com: ALMADEN <br>Prevalence: 1.67 <br>Census: 128","Com: ALMADEN <br>Prevalence: 0.37 <br>Census: 37","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.82 <br>Census: 571","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.43 <br>Census: 134","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.21 <br>Census: 313","Com: ALMADEN <br>Prevalence: 2.4 <br>Census: 212","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.98 <br>Census: 43","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.35 <br>Census: 54","Com: ALMADEN <br>Prevalence: 1.31 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.55 <br>Census: 78","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.26 <br>Census: 140","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.09 <br>Census: 41","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.35 <br>Census: 23","Com: ALMADEN <br>Prevalence: 2.93 <br>Census: 84","Com: HORCAJO DE LOS MONTES <br>Prevalence: 6.45 <br>Census: 33","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 7.13 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.45 <br>Census: 88","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.62 <br>Census: 292","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.92 <br>Census: 122","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.76 <br>Census: 112","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.98 <br>Census: 105","Com: ALMADEN <br>Prevalence: 2.49 <br>Census: 60","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.18 <br>Census: 188","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.85 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.93 <br>Census: 235","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.6 <br>Census: 91","Com: PIEDRABUENA <br>Prevalence: 2.11 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.17 <br>Census: 117","Com: PIEDRABUENA <br>Prevalence: 0.77 <br>Census: 169","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.78 <br>Census: 142","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.26 <br>Census: 150","Com: PIEDRABUENA <br>Prevalence: 1.23 <br>Census: 39","Com: PIEDRABUENA <br>Prevalence: 0.19 <br>Census: 76","Com: ALMADEN <br>Prevalence: 3.17 <br>Census: 60","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.81 <br>Census: 73","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.67 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.74 <br>Census: 201","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.49 <br>Census: 285","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.39 <br>Census: 124","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.85 <br>Census: 170","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.89 <br>Census: 166","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.71 <br>Census: 324","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.71 <br>Census: 100","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.83 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.33 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.87 <br>Census: 158","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.94 <br>Census: 49","Com: PIEDRABUENA <br>Prevalence: 0.23 <br>Census: 146","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.91 <br>Census: 168","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.48 <br>Census: 83","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.51 <br>Census: 44","Com: PIEDRABUENA <br>Prevalence: 1.2 <br>Census: 819","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.88 <br>Census: 116","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.48 <br>Census: 117","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.59 <br>Census: 160","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.62 <br>Census: 411","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.67 <br>Census: 26","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.62 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.53 <br>Census: 92","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.14 <br>Census: 73","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.02 <br>Census: 94","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.27 <br>Census: 591","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.51 <br>Census: 87","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.04 <br>Census: 38","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.24 <br>Census: 35","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.91 <br>Census: 91","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.56 <br>Census: 30","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.32 <br>Census: 144","Com: PIEDRABUENA <br>Prevalence: 6.31 <br>Census: 136","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.09 <br>Census: 551","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.47 <br>Census: 118","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.15 <br>Census: 59","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 9.56 <br>Census: 33","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.31 <br>Census: 47","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.59 <br>Census: 92","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.82 <br>Census: 61","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.55 <br>Census: 72","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.89 <br>Census: 47","Com: HORCAJO DE LOS MONTES <br>Prevalence: 11.35 <br>Census: 43","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.91 <br>Census: 49","Com: HORCAJO DE LOS MONTES <br>Prevalence: 9.93 <br>Census: 163","Com: HORCAJO DE LOS MONTES <br>Prevalence: 4.4 <br>Census: 155","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.89 <br>Census: 146","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.33 <br>Census: 80","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.54 <br>Census: 77","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.21 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.41 <br>Census: 62","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.14 <br>Census: 356","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.45 <br>Census: 101","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.33 <br>Census: 21","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.44 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.24 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.34 <br>Census: 193","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 7.44 <br>Census: 25","Com: HORCAJO DE LOS MONTES <br>Prevalence: 10.43 <br>Census: 130","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.68 <br>Census: 220","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.33 <br>Census: 158","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.82 <br>Census: 90","Com: HORCAJO DE LOS MONTES <br>Prevalence: 3.12 <br>Census: 85","Com: PIEDRABUENA <br>Prevalence: 2.3 <br>Census: 224","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.54 <br>Census: 15","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.44 <br>Census: 34","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.75 <br>Census: 330","Com: MALAGON <br>Prevalence: 0.12 <br>Census: 144","Com: MALAGON <br>Prevalence: 0.57 <br>Census: 117","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.02 <br>Census: 234","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.8 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.7 <br>Census: 39","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.38 <br>Census: 625","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.18 <br>Census: 148","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.64 <br>Census: 18","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.82 <br>Census: 17","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.76 <br>Census: 248","Com: MALAGON <br>Prevalence: 0.54 <br>Census: 97","Com: CIUDAD REAL <br>Prevalence: 3.56 <br>Census: 262","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 10.36 <br>Census: 48","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.57 <br>Census: 443","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.32 <br>Census: 52","Com: MALAGON <br>Prevalence: 3.33 <br>Census: 50","Com: PIEDRABUENA <br>Prevalence: 2 <br>Census: 129","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.71 <br>Census: 56","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.83 <br>Census: 137","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.21 <br>Census: 76","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.5 <br>Census: 99","Com: MALAGON <br>Prevalence: 3.21 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.98 <br>Census: 207","Com: MALAGON <br>Prevalence: 3 <br>Census: 86","Com: MALAGON <br>Prevalence: 1.95 <br>Census: 91","Com: MALAGON <br>Prevalence: 0.98 <br>Census: 133","Com: MALAGON <br>Prevalence: 14.17 <br>Census: 58","Com: MALAGON <br>Prevalence: 4.35 <br>Census: 158","Com: MALAGON <br>Prevalence: 3.07 <br>Census: 124","Com: CIUDAD REAL <br>Prevalence: 5.19 <br>Census: 13","Com: CIUDAD REAL <br>Prevalence: 2.12 <br>Census: 13","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 9 <br>Census: 78","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.69 <br>Census: 23","Com: MALAGON <br>Prevalence: 0.14 <br>Census: 93","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.56 <br>Census: 27","Com: MALAGON <br>Prevalence: 2.38 <br>Census: 13","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.19 <br>Census: 23","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.8 <br>Census: 96","Com: CALZADA DE CALATRAVA <br>Prevalence: 2.17 <br>Census: 50","Com: CIUDAD REAL <br>Prevalence: 5.36 <br>Census: 16","Com: MALAGON <br>Prevalence: 3.75 <br>Census: 37","Com: CIUDAD REAL <br>Prevalence: 10.96 <br>Census: 74","Com: CIUDAD REAL <br>Prevalence: 5.59 <br>Census: 44","Com: CALZADA DE CALATRAVA <br>Prevalence: 4.95 <br>Census: 177","Com: CIUDAD REAL <br>Prevalence: 5.43 <br>Census: 115","Com: MALAGON <br>Prevalence: 1.75 <br>Census: 45","Com: MALAGON <br>Prevalence: 2.48 <br>Census: 57","Com: CALZADA DE CALATRAVA <br>Prevalence: 2.02 <br>Census: 28","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.14 <br>Census: 50","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 1.29 <br>Census: 406","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 0.4 <br>Census: 188","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 0.32 <br>Census: 364","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 1.01 <br>Census: 42","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.87 <br>Census: 49","Com: HORCAJO DE LOS MONTES <br>Prevalence: 11.88 <br>Census: 127"],null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.35865181751682,39.57503092267004],"lng":[-5.009012232869915,-2.712046175198414]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="changing-the-icon" class="section level2" number="8.5">
<h2><span class="header-section-number">8.5</span> Changing the
icon</h2>
<p>We can also change the icons for our markers. In the following
example we will get an image from internet to use it as a marker:</p>
<pre class="r"><code># This is the url for the figure:
iu &lt;- &#39;https://cdn3.iconfinder.com/data/icons/mammal/100/__-72-512.png&#39;
# Now we make an icon with the url
ic &lt;- makeIcon(iconUrl = iu, iconHeight = 40, iconWidth = 40)

leaflet() %&gt;% 
  addProviderTiles(providers$OpenStreetMap) %&gt;% 
  addMarkers(
    data = ejp, 
    popup = ~paste(
      &#39;Com:&#39;, Com,
      &quot;&lt;br&gt;Prevalence:&quot;, Prev,
      &quot;&lt;br&gt;Census:&quot;, Census
    ),
    clusterOptions = markerClusterOptions(),
    icon = ic # HERE WE SPECIFY THE ICON
    )</code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-bb7a2e0c7ac59993de07" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-bb7a2e0c7ac59993de07">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addMarkers","args":[[38.738235572065,38.70985857751873,38.98412480529439,39.01119744947722,38.80679673520338,39.02245042244282,38.99638396519319,38.96228283302399,38.97932013507306,39.00061722913741,38.97632130459453,38.99679509981094,38.99393160426027,38.9846893277763,38.97219499818402,38.97838718383682,38.98219719318539,38.96168472500391,38.96659443375043,39.05000653610205,38.97148567916017,38.98368011303222,39.02025225522851,38.98593491726329,39.0044743776388,38.96808164872305,38.97934655334604,39.0289450816933,38.98955495447,38.76759132587692,38.68721700813811,39.03140948473631,39.08221818977682,38.84644430850779,39.02363299660743,39.05495567619496,39.05712389815766,39.00737340953219,38.61241107125756,38.68176206036753,38.69763830629226,38.87288783575671,38.57202658551341,38.60418982566414,38.99613107148338,38.61742731329971,38.67681071034747,38.57667276049457,38.61833284907399,38.86762724999793,39.27263529679512,38.5825507623531,38.62697268412002,38.63619683400329,38.63204318039162,38.61623686608232,38.64128404294894,39.00940406549384,38.64394213356863,38.62758973734584,38.66485929618913,38.63315075034949,39.08929918982817,38.62144848834707,38.99074003942156,38.5918867864293,38.61551912865828,39.08573656931161,39.06798865154366,38.97905379289005,38.58601395172104,38.65350951170753,38.84615187102733,38.71864499608209,38.76689021519423,38.87116227176085,38.6024317601625,38.62119659906653,38.78664796040147,38.81024447558943,38.80534307720699,38.64930199925749,38.72754583601742,39.19708262112734,38.70685429134765,38.65060460712976,38.7896312322798,39.02533464840356,38.91340928129137,38.86325012253365,38.6123668263813,38.63384112366892,38.58843756554808,38.90671861427047,38.59506243296934,38.59106481787493,38.83665786424135,38.61570056713776,38.86527190862272,38.85839109227707,38.63457753167162,38.60452454181971,38.66210683199656,38.5926065729547,39.00015845884415,38.57566168979543,38.56087247902232,38.58492094113083,38.88343065010648,38.38744921658483,39.51499965436302,38.39863917545285,38.62529732635183,39.27950778956102,39.22209716402628,39.25701019584773,39.24273326794724,39.49262428561907,39.2638290663723,39.26065372912338,38.37006315121192,39.20582191617093,38.7102609181171,38.90778228867773,39.17562372839818,38.52105869282833,39.15782903163684,38.53647666149263,38.56012097787132,38.35865181751682,39.22764218224025,39.21390548007142,39.2306814296198,39.24749450690248,39.22830623648992,38.99306477958463,38.76467440611409,39.19792129189081,39.18819205325867,39.17164111329631,39.26028857490304,38.57483300203682,38.9056363949026,38.77004866801838,39.48508557948036,38.72193121794018,38.66049964254718,38.64276199365082,39.2947209674255,39.12831807487498,38.86518157346439,38.50279388987747,39.44195465821352,38.63157962983412,39.28585026207759,38.91878832000145,38.70665433351983,38.53687295073552,38.5504713354269,39.57503092267004,39.18921431945295,38.5072583773343,39.30676504596769,39.32880821339571,39.15718033094866,39.28143282537763,39.34069946717299,39.33310031355222,39.05659845869648,39.05984719122611,38.62527977674176,38.39912129646046,39.32520032001439,38.3963554822947,39.2433480325313,38.3973017382189,38.40058394408364,38.66227346854274,38.93021760663142,39.21498152412902,38.97371127639595,38.99561161059646,38.52384960068353,38.97128857831786,39.23599523342673,39.21951962574945,38.9388768667767,39.05924415683962,38.51752738876137,38.49992429686881,38.54956871790394,38.7078059644795,39.25002802615511,39.19626546780761],[-5.009012232869915,-4.993612409048099,-4.894628114803871,-4.918976503588656,-4.911746836881013,-4.872933337652766,-4.90542469055903,-4.886278128441651,-4.893117549496073,-4.864646673759422,-4.891152988791896,-4.883370628373494,-4.895912241769273,-4.860873060476337,-4.865144348360104,-4.884334344657106,-4.893067628291886,-4.884198749587535,-4.874278098379738,-4.886013858627948,-4.873650869893154,-4.854153583857187,-4.861488313587112,-4.834870203966142,-4.881651520461312,-4.864830146011573,-4.854902474286067,-4.83179368820634,-4.84854931786946,-4.817604266696517,-4.827221528877709,-4.822644967676702,-4.828399156975374,-4.776050778555891,-4.802664245387901,-4.784469265490661,-4.780168591423271,-4.768897433822564,-4.755299706017699,-4.744473750803381,-4.731077211934669,-4.745100854653529,-4.737351439806289,-4.717211198759411,-4.74012987567136,-4.730007836414308,-4.725028105010312,-4.716363093307885,-4.717565753982844,-4.713102092573454,-4.711710430235693,-4.686877943905531,-4.674616378371288,-4.644952397352964,-4.653994726390565,-4.613077345991669,-4.616695891241304,-4.628917135065882,-4.620607656122667,-4.623015108331383,-4.625942713314856,-4.602218186164606,-4.62998833821997,-4.627058314605595,-4.605832989244848,-4.573626432665711,-4.582305664299199,-4.57461349140035,-4.584530371778841,-4.595513916002822,-4.55471599760826,-4.566716136823946,-4.539537520562176,-4.531625734560777,-4.526460053612417,-4.534653004889536,-4.498258104828987,-4.520332776127936,-4.502006309498709,-4.482355141678313,-4.514017178207347,-4.487721863314574,-4.50905574096094,-4.499315829239385,-4.512077252887798,-4.487224513658001,-4.476401089038903,-4.478169638843022,-4.509571217143371,-4.490795905774238,-4.475648084030506,-4.456390863789529,-4.457470899840244,-4.465008594090851,-4.449242658772135,-4.450259082376529,-4.45159331849815,-4.453090981713746,-4.447491812604659,-4.479013841628511,-4.447603416272393,-4.4637625545432,-4.463852515229748,-4.436624643989822,-4.418513178741652,-4.396597635746615,-4.395594920307655,-4.374721463818404,-4.390261006517218,-4.367255583580917,-4.395698602315049,-4.357685347176478,-4.359914718801235,-4.349703318745829,-4.346814154993225,-4.346592420734632,-4.322688205306385,-4.363617711061242,-4.363412308843334,-4.346120736439306,-4.335211573661815,-4.309206185986514,-4.338263745859547,-4.324359132184279,-4.343532001716227,-4.301050905451952,-4.348905859790542,-4.318184881365618,-4.300305956204594,-4.300717256334536,-4.315828142309543,-4.293099937752244,-4.321793729397419,-4.301050003573266,-4.2997936088953,-4.291980254530769,-4.296778248613348,-4.294454962146762,-4.258845585409263,-4.281618370229027,-4.269346393754387,-4.241052428359271,-4.254081248935685,-4.245514524219432,-4.261560447333552,-4.23072745878374,-4.226661496167306,-4.233516476576363,-4.23473728235026,-4.220466219386688,-4.222402018538318,-4.230210468232458,-4.219943414397145,-4.194754115932756,-4.171814393093673,-4.203614017031203,-4.155918245893821,-4.162731955753251,-4.165486381357733,-4.160845098123522,-4.1670370064453,-4.129334409207723,-4.122932723483933,-4.153589902931255,-4.134174102147752,-4.143214013184854,-4.087744949278644,-4.079829057389727,-4.07018530128251,-4.05843248209231,-4.030850952180119,-3.956177259044763,-3.948914393327482,-3.957540081003851,-3.954288827904965,-3.94098080141348,-3.938408201437078,-3.922943443637314,-3.906437215189164,-3.888412830692547,-3.898860073534359,-3.902296575646498,-3.860236003495292,-3.887416465289951,-3.789652106005473,-3.770849031860702,-3.666932286929155,-3.214390622956101,-3.178603573724783,-3.034420514072882,-2.818676621073133,-2.712046175198414,-4.340618270956019,-4.337375886420838],{"iconUrl":{"data":"https://cdn3.iconfinder.com/data/icons/mammal/100/__-72-512.png","index":0},"iconWidth":40,"iconHeight":40},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Com: ALMADEN <br>Prevalence: 1.04 <br>Census: 14","Com: ALMADEN <br>Prevalence: 0.56 <br>Census: 95","Com: ALMADEN <br>Prevalence: 1.57 <br>Census: 54","Com: ALMADEN <br>Prevalence: 13.64 <br>Census: 17","Com: ALMADEN <br>Prevalence: 2.29 <br>Census: 143","Com: ALMADEN <br>Prevalence: 3.61 <br>Census: 126","Com: ALMADEN <br>Prevalence: 1.26 <br>Census: 54","Com: ALMADEN <br>Prevalence: 0.56 <br>Census: 29","Com: ALMADEN <br>Prevalence: 0.44 <br>Census: 97","Com: ALMADEN <br>Prevalence: 2.92 <br>Census: 100","Com: ALMADEN <br>Prevalence: 3.78 <br>Census: 39","Com: ALMADEN <br>Prevalence: 2.48 <br>Census: 34","Com: ALMADEN <br>Prevalence: 2.39 <br>Census: 34","Com: ALMADEN <br>Prevalence: 6.67 <br>Census: 23","Com: ALMADEN <br>Prevalence: 0.3 <br>Census: 51","Com: ALMADEN <br>Prevalence: 0.2 <br>Census: 82","Com: ALMADEN <br>Prevalence: 1.85 <br>Census: 93","Com: ALMADEN <br>Prevalence: 0.77 <br>Census: 89","Com: ALMADEN <br>Prevalence: 4.08 <br>Census: 68","Com: ALMADEN <br>Prevalence: 0.35 <br>Census: 96","Com: ALMADEN <br>Prevalence: 1.39 <br>Census: 50","Com: ALMADEN <br>Prevalence: 2.53 <br>Census: 116","Com: ALMADEN <br>Prevalence: 3.23 <br>Census: 26","Com: ALMADEN <br>Prevalence: 0.93 <br>Census: 133","Com: ALMADEN <br>Prevalence: 2.35 <br>Census: 56","Com: ALMADEN <br>Prevalence: 3.69 <br>Census: 68","Com: ALMADEN <br>Prevalence: 1.21 <br>Census: 81","Com: ALMADEN <br>Prevalence: 0.54 <br>Census: 30","Com: ALMADEN <br>Prevalence: 2.38 <br>Census: 24","Com: ALMADEN <br>Prevalence: 7.22 <br>Census: 22","Com: ALMADEN <br>Prevalence: 0.93 <br>Census: 29","Com: ALMADEN <br>Prevalence: 2.5 <br>Census: 21","Com: ALMADEN <br>Prevalence: 8.47 <br>Census: 77","Com: ALMADEN <br>Prevalence: 1.04 <br>Census: 27","Com: ALMADEN <br>Prevalence: 1.38 <br>Census: 157","Com: ALMADEN <br>Prevalence: 1.57 <br>Census: 129","Com: ALMADEN <br>Prevalence: 1.67 <br>Census: 128","Com: ALMADEN <br>Prevalence: 0.37 <br>Census: 37","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.82 <br>Census: 571","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.43 <br>Census: 134","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.21 <br>Census: 313","Com: ALMADEN <br>Prevalence: 2.4 <br>Census: 212","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.98 <br>Census: 43","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.35 <br>Census: 54","Com: ALMADEN <br>Prevalence: 1.31 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.55 <br>Census: 78","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.26 <br>Census: 140","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.09 <br>Census: 41","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.35 <br>Census: 23","Com: ALMADEN <br>Prevalence: 2.93 <br>Census: 84","Com: HORCAJO DE LOS MONTES <br>Prevalence: 6.45 <br>Census: 33","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 7.13 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.45 <br>Census: 88","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.62 <br>Census: 292","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.92 <br>Census: 122","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.76 <br>Census: 112","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.98 <br>Census: 105","Com: ALMADEN <br>Prevalence: 2.49 <br>Census: 60","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.18 <br>Census: 188","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.85 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.93 <br>Census: 235","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.6 <br>Census: 91","Com: PIEDRABUENA <br>Prevalence: 2.11 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.17 <br>Census: 117","Com: PIEDRABUENA <br>Prevalence: 0.77 <br>Census: 169","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.78 <br>Census: 142","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.26 <br>Census: 150","Com: PIEDRABUENA <br>Prevalence: 1.23 <br>Census: 39","Com: PIEDRABUENA <br>Prevalence: 0.19 <br>Census: 76","Com: ALMADEN <br>Prevalence: 3.17 <br>Census: 60","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.81 <br>Census: 73","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.67 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.74 <br>Census: 201","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.49 <br>Census: 285","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.39 <br>Census: 124","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.85 <br>Census: 170","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.89 <br>Census: 166","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.71 <br>Census: 324","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.71 <br>Census: 100","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.83 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.33 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.87 <br>Census: 158","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.94 <br>Census: 49","Com: PIEDRABUENA <br>Prevalence: 0.23 <br>Census: 146","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.91 <br>Census: 168","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.48 <br>Census: 83","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.51 <br>Census: 44","Com: PIEDRABUENA <br>Prevalence: 1.2 <br>Census: 819","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.88 <br>Census: 116","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.48 <br>Census: 117","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.59 <br>Census: 160","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.62 <br>Census: 411","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.67 <br>Census: 26","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.62 <br>Census: 63","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.53 <br>Census: 92","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.14 <br>Census: 73","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.02 <br>Census: 94","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.27 <br>Census: 591","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.51 <br>Census: 87","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.04 <br>Census: 38","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.24 <br>Census: 35","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.91 <br>Census: 91","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.56 <br>Census: 30","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.32 <br>Census: 144","Com: PIEDRABUENA <br>Prevalence: 6.31 <br>Census: 136","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.09 <br>Census: 551","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.47 <br>Census: 118","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.15 <br>Census: 59","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 9.56 <br>Census: 33","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.31 <br>Census: 47","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.59 <br>Census: 92","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.82 <br>Census: 61","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.55 <br>Census: 72","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.89 <br>Census: 47","Com: HORCAJO DE LOS MONTES <br>Prevalence: 11.35 <br>Census: 43","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.91 <br>Census: 49","Com: HORCAJO DE LOS MONTES <br>Prevalence: 9.93 <br>Census: 163","Com: HORCAJO DE LOS MONTES <br>Prevalence: 4.4 <br>Census: 155","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.89 <br>Census: 146","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.33 <br>Census: 80","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.54 <br>Census: 77","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.21 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.41 <br>Census: 62","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.14 <br>Census: 356","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.45 <br>Census: 101","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.33 <br>Census: 21","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.44 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.24 <br>Census: 77","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.34 <br>Census: 193","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 7.44 <br>Census: 25","Com: HORCAJO DE LOS MONTES <br>Prevalence: 10.43 <br>Census: 130","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.68 <br>Census: 220","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.33 <br>Census: 158","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.82 <br>Census: 90","Com: HORCAJO DE LOS MONTES <br>Prevalence: 3.12 <br>Census: 85","Com: PIEDRABUENA <br>Prevalence: 2.3 <br>Census: 224","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.54 <br>Census: 15","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.44 <br>Census: 34","Com: HORCAJO DE LOS MONTES <br>Prevalence: 0.75 <br>Census: 330","Com: MALAGON <br>Prevalence: 0.12 <br>Census: 144","Com: MALAGON <br>Prevalence: 0.57 <br>Census: 117","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 3.02 <br>Census: 234","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.8 <br>Census: 96","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 5.7 <br>Census: 39","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.38 <br>Census: 625","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 4.18 <br>Census: 148","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 6.64 <br>Census: 18","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.82 <br>Census: 17","Com: HORCAJO DE LOS MONTES <br>Prevalence: 2.76 <br>Census: 248","Com: MALAGON <br>Prevalence: 0.54 <br>Census: 97","Com: CIUDAD REAL <br>Prevalence: 3.56 <br>Census: 262","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 10.36 <br>Census: 48","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.57 <br>Census: 443","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 8.32 <br>Census: 52","Com: MALAGON <br>Prevalence: 3.33 <br>Census: 50","Com: PIEDRABUENA <br>Prevalence: 2 <br>Census: 129","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.71 <br>Census: 56","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.83 <br>Census: 137","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.21 <br>Census: 76","Com: HORCAJO DE LOS MONTES <br>Prevalence: 1.5 <br>Census: 99","Com: MALAGON <br>Prevalence: 3.21 <br>Census: 90","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.98 <br>Census: 207","Com: MALAGON <br>Prevalence: 3 <br>Census: 86","Com: MALAGON <br>Prevalence: 1.95 <br>Census: 91","Com: MALAGON <br>Prevalence: 0.98 <br>Census: 133","Com: MALAGON <br>Prevalence: 14.17 <br>Census: 58","Com: MALAGON <br>Prevalence: 4.35 <br>Census: 158","Com: MALAGON <br>Prevalence: 3.07 <br>Census: 124","Com: CIUDAD REAL <br>Prevalence: 5.19 <br>Census: 13","Com: CIUDAD REAL <br>Prevalence: 2.12 <br>Census: 13","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 9 <br>Census: 78","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 0.69 <br>Census: 23","Com: MALAGON <br>Prevalence: 0.14 <br>Census: 93","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 2.56 <br>Census: 27","Com: MALAGON <br>Prevalence: 2.38 <br>Census: 13","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.19 <br>Census: 23","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.8 <br>Census: 96","Com: CALZADA DE CALATRAVA <br>Prevalence: 2.17 <br>Census: 50","Com: CIUDAD REAL <br>Prevalence: 5.36 <br>Census: 16","Com: MALAGON <br>Prevalence: 3.75 <br>Census: 37","Com: CIUDAD REAL <br>Prevalence: 10.96 <br>Census: 74","Com: CIUDAD REAL <br>Prevalence: 5.59 <br>Census: 44","Com: CALZADA DE CALATRAVA <br>Prevalence: 4.95 <br>Census: 177","Com: CIUDAD REAL <br>Prevalence: 5.43 <br>Census: 115","Com: MALAGON <br>Prevalence: 1.75 <br>Census: 45","Com: MALAGON <br>Prevalence: 2.48 <br>Census: 57","Com: CALZADA DE CALATRAVA <br>Prevalence: 2.02 <br>Census: 28","Com: ALMODOVAR DEL CAMPO <br>Prevalence: 1.14 <br>Census: 50","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 1.29 <br>Census: 406","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 0.4 <br>Census: 188","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 0.32 <br>Census: 364","Com: VILLANUEVA DE LOS INFANTES <br>Prevalence: 1.01 <br>Census: 42","Com: HORCAJO DE LOS MONTES <br>Prevalence: 8.87 <br>Census: 49","Com: HORCAJO DE LOS MONTES <br>Prevalence: 11.88 <br>Census: 127"],null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.35865181751682,39.57503092267004],"lng":[-5.009012232869915,-2.712046175198414]}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="polygons" class="section level2" number="8.6">
<h2><span class="header-section-number">8.6</span> Polygons</h2>
<p>We can also use polygon data with leaflet.</p>
<pre class="r"><code># Create a continuous palette 
pal &lt;- colorNumeric(
  palette = &quot;Reds&quot;,
  domain = joinedSp$prop)

leaflet() %&gt;%
  addProviderTiles(providers$OpenStreetMap) %&gt;%
  addPolygons(
    data = joinedSp, fillColor = ~pal(prop),
    popup = ~paste(
      &#39;Com:&#39;, com,
      &quot;&lt;br&gt;Prevalence:&quot;, prop,
      &quot;&lt;br&gt;Number of farms:&quot;, n
    )
  ) </code></pre>
<div class="leaflet html-widget html-fill-item" id="htmlwidget-aced214d9aa1461549e5" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-aced214d9aa1461549e5">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["OpenStreetMap",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addPolygons","args":[[[[{"lng":[-3.410699999999999,-3.408100000000001,-3.4041,-3.387,-3.3647,-3.3506,-3.3466,-3.335,-3.3204,-3.3161,-3.3089,-3.2952,-3.2922,-3.2859,-3.2753,-3.2754,-3.269699999999999,-3.2659,-3.2616,-3.2604,-3.2455,-3.2442,-3.2471,-3.249,-3.2476,-3.2576,-3.2612,-3.266,-3.266500000000001,-3.2835,-3.286,-3.2802,-3.2717,-3.2721,-3.2677,-3.271199999999999,-3.2633,-3.2465,-3.2464,-3.2348,-3.2268,-3.216200000000001,-3.196,-3.1934,-3.1986,-3.1999,-3.212600000000001,-3.2031,-3.1875,-3.1785,-3.1728,-3.1717,-3.1731,-3.1577,-3.1415,-3.1346,-3.1259,-3.117999999999999,-3.120499999999999,-3.1329,-3.1327,-3.134799999999999,-3.1405,-3.1386,-3.1599,-3.166300000000001,-3.167500000000001,-3.164,-3.159,-3.166799999999999,-3.1842,-3.1853,-3.2028,-3.2124,-3.233099999999999,-3.2543,-3.2551,-3.2379,-3.2321,-3.2297,-3.228899999999999,-3.2169,-3.2094,-3.2029,-3.1994,-3.196299999999999,-3.1857,-3.1672,-3.1522,-3.1468,-3.1394,-3.1197,-3.1002,-3.077900000000001,-3.070199999999999,-3.051800000000001,-3.0334,-3.0221,-3.0138,-3.0037,-2.9928,-2.9888,-2.965,-2.9611,-2.9535,-2.9392,-2.9247,-2.9171,-2.9034,-2.8937,-2.8886,-2.8879,-2.890200000000001,-2.89,-2.8857,-2.8791,-2.8773,-2.8725,-2.8736,-2.8721,-2.8764,-2.881,-2.8671,-2.8528,-2.852100000000001,-2.8583,-2.8878,-2.8922,-2.895900000000001,-2.9031,-2.9039,-2.9188,-2.9256,-2.9083,-2.8743,-2.859999999999999,-2.8485,-2.8284,-2.8224,-2.8311,-2.8341,-2.8335,-2.8426,-2.822800000000001,-2.807700000000001,-2.7823,-2.7731,-2.7711,-2.7597,-2.7303,-2.7231,-2.722,-2.7233,-2.726700000000001,-2.7343,-2.7391,-2.7436,-2.7422,-2.7465,-2.7562,-2.7625,-2.772,-2.7763,-2.7759,-2.793,-2.7941,-2.7981,-2.8018,-2.8087,-2.8101,-2.813,-2.8132,-2.8167,-2.8281,-2.8456,-2.8532,-2.8608,-2.8599,-2.8646,-2.8823,-2.8827,-2.8862,-2.8887,-2.893,-2.8965,-2.887300000000001,-2.8864,-2.8845,-2.8705,-2.870099999999999,-2.874,-2.877299999999999,-2.8794,-2.8858,-2.8896,-2.893200000000001,-2.9,-2.8973,-2.9026,-2.9018,-2.9042,-2.9038,-2.9013,-2.9034,-2.9124,-2.9142,-2.9213,-2.9219,-2.9253,-2.9269,-2.9263,-2.931700000000001,-2.9321,-2.9292,-2.931,-2.9276,-2.9293,-2.9313,-2.9552,-2.9567,-2.966000000000001,-2.9776,-2.9947,-3,-2.9995,-3.0148,-3.0225,-3.0497,-3.069500000000001,-3.0757,-3.1001,-3.1101,-3.1433,-3.1572,-3.1844,-3.1851,-3.21,-3.2557,-3.2941,-3.2972,-3.3022,-3.3033,-3.314099999999999,-3.3157,-3.3144,-3.3163,-3.3154,-3.3117,-3.309,-3.3113,-3.309,-3.3305,-3.3495,-3.4102,-3.4123,-3.4199,-3.4269,-3.4478,-3.4704,-3.476799999999999,-3.4857,-3.4928,-3.5249,-3.531299999999999,-3.5325,-3.5482,-3.5561,-3.567000000000001,-3.5737,-3.5773,-3.5865,-3.6078,-3.6116,-3.6227,-3.6238,-3.638799999999999,-3.6574,-3.6751,-3.6801,-3.6796,-3.6837,-3.688000000000001,-3.7012,-3.720600000000001,-3.7224,-3.73,-3.7406,-3.744699999999999,-3.7441,-3.7527,-3.7513,-3.757299999999999,-3.7652,-3.770900000000001,-3.769,-3.765699999999999,-3.7656,-3.7624,-3.778399999999999,-3.802,-3.804,-3.8026,-3.804,-3.805800000000001,-3.8057,-3.8028,-3.7942,-3.794500000000001,-3.7994,-3.7906,-3.7812,-3.7796,-3.770799999999999,-3.7618,-3.739499999999999,-3.7333,-3.733500000000001,-3.7277,-3.7247,-3.717200000000001,-3.7031,-3.704400000000001,-3.702199999999999,-3.6957,-3.687600000000001,-3.6986,-3.684899999999999,-3.6724,-3.656,-3.6319,-3.621700000000001,-3.6153,-3.616,-3.5922,-3.5761,-3.5754,-3.556299999999999,-3.555,-3.535000000000001,-3.5299,-3.5211,-3.5174,-3.5118,-3.514,-3.5075,-3.509,-3.5078,-3.5162,-3.5137,-3.5145,-3.5219,-3.5249,-3.523400000000001,-3.524900000000001,-3.5338,-3.529599999999999,-3.5321,-3.535000000000001,-3.532799999999999,-3.534199999999999,-3.536500000000001,-3.56,-3.5743,-3.5886,-3.5886,-3.584499999999999,-3.579299999999999,-3.5747,-3.5607,-3.5527,-3.5529,-3.544299999999999,-3.5396,-3.5317,-3.5331,-3.5195,-3.4934,-3.471200000000001,-3.4547,-3.438,-3.432900000000001,-3.4313,-3.434400000000001,-3.4353,-3.4539,-3.4509,-3.4556,-3.4525,-3.452999999999999,-3.437,-3.4265,-3.417800000000001,-3.410699999999999],"lat":[38.6741,38.6835,38.68719999999999,38.6921,38.693,38.6893,38.6902,38.6873,38.6759,38.6782,38.675,38.679,38.6832,38.684,38.6947,38.7059,38.7077,38.7071,38.7095,38.7121,38.7159,38.7224,38.7264,38.7381,38.74270000000001,38.7604,38.7582,38.75809999999999,38.7635,38.762,38.7648,38.7768,38.7795,38.7867,38.7882,38.7992,38.8014,38.80199999999999,38.806,38.80540000000001,38.8086,38.81020000000001,38.8286,38.8432,38.8525,38.8591,38.8769,38.8781,38.8761,38.8743,38.871,38.8764,38.87960000000001,38.8877,38.8914,38.8958,38.896,38.899,38.9173,38.9207,38.9255,38.9303,38.9339,38.955,38.95330000000001,38.9551,38.95870000000001,38.95940000000001,38.9681,38.97429999999999,38.97,38.9678,38.9667,38.97669999999999,38.9865,38.9938,38.9996,39.0019,39.0061,39.0102,39.0095,39.0174,39.0199,39.0164,39.017,39.0253,39.0258,39.036,39.0413,39.03890000000001,39.0308,39.0187,39.0132,39.01430000000001,39.01,38.989,38.9837,38.97730000000001,38.97520000000001,38.968,38.9636,38.9643,38.9595,38.956,38.95480000000001,38.95929999999999,38.9697,38.9724,38.98520000000001,38.97350000000001,38.97229999999999,38.9698,38.96790000000001,38.96509999999999,38.9612,38.9605,38.95620000000001,38.96,38.9628,38.9681,38.969,38.9858,38.997,39.01850000000001,39.02219999999999,39.02640000000001,39.0252,39.0448,39.05250000000001,39.0616,39.0667,39.0796,39.0989,39.0926,39.0901,39.0871,39.0889,39.0891,39.09270000000001,39.1053,39.1123,39.1209,39.1345,39.15350000000001,39.17700000000001,39.1959,39.20940000000001,39.21540000000001,39.2304,39.255,39.26480000000001,39.2687,39.2777,39.2864,39.29300000000001,39.3085,39.316,39.3182,39.3224,39.3382,39.3585,39.3696,39.38629999999999,39.3948,39.39779999999999,39.3943,39.3928,39.38870000000001,39.3874,39.3829,39.3824,39.3755,39.36840000000001,39.3569,39.3493,39.35019999999999,39.3472,39.3486,39.35690000000001,39.3509,39.3525,39.3533,39.35740000000001,39.3587,39.3668,39.3785,39.3843,39.3854,39.3844,39.3911,39.3948,39.3954,39.39959999999999,39.4056,39.42189999999999,39.4214,39.425,39.4301,39.4297,39.4325,39.4342,39.4284,39.4272,39.4262,39.43769999999999,39.447,39.4503,39.452,39.4524,39.4507,39.4542,39.45280000000001,39.4554,39.4575,39.46280000000001,39.4708,39.4697,39.47150000000001,39.4549,39.4472,39.44800000000001,39.4447,39.45140000000001,39.44890000000001,39.4417,39.44509999999999,39.457,39.4507,39.4503,39.4581,39.4754,39.476,39.4956,39.4961,39.48799999999999,39.4742,39.4763,39.4709,39.4709,39.4601,39.4546,39.4502,39.4386,39.43370000000001,39.4313,39.4289,39.4247,39.4193,39.4103,39.40430000000001,39.3992,39.4054,39.4083,39.4046,39.4013,39.3993,39.3944,39.38700000000001,39.3722,39.3432,39.3412,39.3346,39.315,39.3093,39.30419999999999,39.30210000000001,39.29910000000001,39.2994,39.30080000000001,39.3053,39.30769999999999,39.30219999999999,39.30340000000001,39.3006,39.3027,39.2998,39.2994,39.2967,39.2983,39.2921,39.2903,39.2849,39.2776,39.2698,39.2696,39.27480000000001,39.27629999999999,39.2828,39.2738,39.2618,39.2248,39.2136,39.2121,39.2139,39.2002,39.1923,39.1573,39.1524,39.1416,39.1345,39.1258,39.1144,39.1126,39.1132,39.11060000000001,39.1071,39.1067,39.10540000000001,39.1052,39.0996,39.10099999999999,39.0988,39.0948,39.0928,39.0928,39.0885,39.0814,39.06929999999999,39.06590000000001,39.0625,39.0434,39.0425,39.04129999999999,39.03020000000001,39.0233,39.0053,38.9908,38.9881,38.9953,38.9987,38.9912,38.9782,38.9748,38.9511,38.9269,38.9234,38.92779999999999,38.9062,38.8792,38.861,38.8489,38.8486,38.8521,38.84500000000001,38.82930000000001,38.8194,38.8151,38.7837,38.7743,38.7667,38.7641,38.76139999999999,38.76,38.7563,38.7513,38.7498,38.7469,38.7461,38.7383,38.7267,38.7234,38.7049,38.6814,38.6673,38.6638,38.6574,38.6534,38.64459999999999,38.6362,38.6267,38.6222,38.6164,38.61,38.58560000000001,38.5798,38.5758,38.57840000000001,38.5712,38.56830000000001,38.5674,38.5649,38.5714,38.5788,38.5864,38.6049,38.6069,38.6117,38.6214,38.62769999999999,38.6489,38.6673,38.6673,38.6741]}]],[[{"lng":[-3.8676,-3.888,-3.9029,-3.9135,-3.934400000000001,-3.9373,-3.963000000000001,-3.9989,-4.008,-4.0234,-4.033200000000001,-4.0388,-4.0494,-4.0667,-4.074400000000001,-4.0762,-4.0704,-4.0653,-4.0652,-4.0726,-4.079500000000001,-4.0893,-4.1023,-4.106600000000001,-4.1057,-4.1139,-4.114300000000001,-4.116400000000001,-4.1119,-4.1122,-4.1064,-4.1088,-4.103,-4.1053,-4.1127,-4.114,-4.1333,-4.1319,-4.138199999999999,-4.1471,-4.1568,-4.1586,-4.1614,-4.159500000000001,-4.1671,-4.1713,-4.1793,-4.1821,-4.1885,-4.209800000000001,-4.2324,-4.245100000000001,-4.25,-4.2507,-4.2543,-4.2603,-4.2456,-4.2452,-4.2562,-4.2601,-4.2649,-4.2673,-4.279000000000001,-4.2964,-4.2995,-4.3114,-4.3228,-4.327,-4.3307,-4.3363,-4.350000000000001,-4.3562,-4.3645,-4.369199999999999,-4.3712,-4.3735,-4.375,-4.3796,-4.3793,-4.3827,-4.3916,-4.3879,-4.3876,-4.382199999999999,-4.3775,-4.3728,-4.366299999999999,-4.3657,-4.3618,-4.3589,-4.3569,-4.3549,-4.349799999999999,-4.345600000000001,-4.3352,-4.325200000000001,-4.3227,-4.3218,-4.3136,-4.3121,-4.3022,-4.2993,-4.2814,-4.276699999999999,-4.2618,-4.2582,-4.252699999999999,-4.2459,-4.239,-4.2353,-4.2302,-4.2285,-4.2155,-4.211999999999999,-4.189600000000001,-4.1262,-4.1285,-4.1237,-4.123100000000001,-4.1041,-4.086200000000001,-4.0817,-4.075499999999999,-4.0621,-4.0552,-4.0456,-4.0427,-4.026799999999999,-4.010399999999999,-4.010000000000001,-4.0001,-3.9807,-3.975299999999999,-3.973,-3.9575,-3.957,-3.9478,-3.944999999999999,-3.9394,-3.939499999999999,-3.9339,-3.9343,-3.9269,-3.9313,-3.9287,-3.9223,-3.8942,-3.8911,-3.8893,-3.884,-3.8796,-3.866400000000001,-3.8625,-3.8619,-3.8514,-3.835700000000001,-3.8295,-3.830000000000001,-3.821699999999999,-3.8165,-3.805199999999999,-3.7979,-3.7941,-3.7938,-3.791100000000001,-3.791599999999999,-3.8111,-3.8126,-3.8265,-3.8295,-3.8474,-3.8666,-3.874,-3.888,-3.892,-3.9027,-3.9129,-3.9129,-3.9195,-3.9016,-3.8958,-3.8852,-3.878,-3.8736,-3.8579,-3.856100000000001,-3.8515,-3.8482,-3.845,-3.8387,-3.831,-3.8292,-3.8209,-3.8126,-3.785800000000001,-3.7785,-3.768199999999999,-3.759199999999999,-3.7545,-3.7456,-3.7336,-3.7254,-3.7216,-3.7168,-3.7087,-3.7069,-3.7014,-3.6982,-3.6975,-3.6994,-3.704,-3.7074,-3.711999999999999,-3.7133,-3.712,-3.7145,-3.7018,-3.692799999999999,-3.6912,-3.6711,-3.6521,-3.653099999999999,-3.647200000000001,-3.6501,-3.6561,-3.628000000000001,-3.6201,-3.6078,-3.5973,-3.5886,-3.5886,-3.5743,-3.56,-3.536500000000001,-3.534199999999999,-3.532799999999999,-3.535000000000001,-3.5321,-3.529599999999999,-3.5338,-3.524900000000001,-3.523400000000001,-3.5249,-3.5219,-3.5145,-3.5137,-3.5162,-3.5078,-3.509,-3.5075,-3.514,-3.5118,-3.5174,-3.5211,-3.5299,-3.535000000000001,-3.555,-3.556299999999999,-3.5754,-3.5761,-3.5922,-3.616,-3.6153,-3.621700000000001,-3.6319,-3.656,-3.6724,-3.684899999999999,-3.6986,-3.687600000000001,-3.6957,-3.702199999999999,-3.704400000000001,-3.7031,-3.717200000000001,-3.7247,-3.7277,-3.733500000000001,-3.7333,-3.739499999999999,-3.7618,-3.770799999999999,-3.7796,-3.7812,-3.7906,-3.7954,-3.7994,-3.794500000000001,-3.7942,-3.8028,-3.8057,-3.805800000000001,-3.804,-3.8026,-3.804,-3.802,-3.8067,-3.8327,-3.8676],"lat":[39.14820000000001,39.1545,39.1552,39.1581,39.1601,39.1584,39.1547,39.1536,39.15020000000001,39.1503,39.148,39.14500000000001,39.1438,39.1369,39.1324,39.1273,39.125,39.1194,39.11490000000001,39.112,39.1141,39.1047,39.1029,39.0955,39.09239999999999,39.09,39.0869,39.0858,39.0793,39.0669,39.0581,39.0549,39.0503,39.0466,39.0421,39.03790000000001,39.0233,39.0157,39.01430000000001,39.01530000000001,39.0125,39.0107,39.0063,39.0038,38.9977,38.9754,38.9736,38.9685,38.9681,38.9711,38.9706,38.9761,38.97469999999999,38.9667,38.95960000000001,38.9371,38.928,38.9264,38.9182,38.917,38.9114,38.9023,38.8963,38.88399999999999,38.8781,38.8712,38.8614,38.8603,38.8541,38.8555,38.8507,38.8529,38.84610000000001,38.8467,38.8447,38.8457,38.844,38.8447,38.8466,38.8486,38.8458,38.84030000000001,38.8362,38.8358,38.8307,38.8325,38.82409999999999,38.8179,38.8126,38.8119,38.8142,38.8135,38.80569999999999,38.80380000000001,38.8039,38.8013,38.7996,38.7948,38.7944,38.79170000000001,38.7925,38.7892,38.7864,38.7844,38.7838,38.7804,38.7799,38.7761,38.7631,38.7603,38.7624,38.7608,38.7602,38.75789999999999,38.7597,38.7452,38.7352,38.7262,38.70800000000001,38.7094,38.699,38.7,38.6981,38.70120000000001,38.7009,38.69779999999999,38.6925,38.6895,38.6896,38.69109999999999,38.6926,38.68969999999999,38.6923,38.69090000000001,38.6905,38.6918,38.692,38.6906,38.6806,38.6774,38.6727,38.6635,38.6536,38.6439,38.637,38.6362,38.6448,38.6465,38.6509,38.6557,38.65570000000001,38.6599,38.6615,38.6638,38.65730000000001,38.656,38.6495,38.64600000000001,38.6403,38.6342,38.62939999999999,38.62230000000001,38.6168,38.6136,38.6114,38.6076,38.59059999999999,38.5727,38.577,38.5807,38.5848,38.5866,38.5662,38.5641,38.55909999999999,38.557,38.5441,38.5388,38.534,38.52800000000001,38.5298,38.5272,38.5197,38.5198,38.5129,38.5001,38.4989,38.49589999999999,38.4979,38.4936,38.4925,38.4937,38.49019999999999,38.4896,38.4806,38.4758,38.4744,38.4664,38.46419999999999,38.4649,38.4943,38.4997,38.5093,38.5152,38.521,38.5246,38.5271,38.5315,38.5346,38.5363,38.5368,38.5431,38.5456,38.54740000000001,38.5532,38.5546,38.5656,38.56979999999999,38.5808,38.59830000000001,38.6118,38.6163,38.62769999999999,38.6359,38.6433,38.6524,38.66740000000001,38.672,38.6661,38.6638,38.6673,38.6814,38.7049,38.7234,38.7267,38.7383,38.7461,38.7469,38.7498,38.7513,38.7563,38.76,38.76139999999999,38.7641,38.7667,38.7743,38.7837,38.8151,38.8194,38.82930000000001,38.84500000000001,38.8521,38.8486,38.8489,38.861,38.8792,38.9062,38.92779999999999,38.9234,38.9269,38.9511,38.9748,38.9782,38.9912,38.9987,38.9953,38.9881,38.9908,39.0053,39.0233,39.03020000000001,39.04129999999999,39.0425,39.0434,39.0625,39.06590000000001,39.06929999999999,39.0814,39.0885,39.0928,39.0928,39.0948,39.0988,39.10099999999999,39.0996,39.102,39.1052,39.10540000000001,39.1067,39.1071,39.11060000000001,39.1132,39.1126,39.1144,39.1258,39.1345,39.1343,39.1422,39.14820000000001]}]],[[{"lng":[-3.1799,-3.1498,-3.130100000000001,-3.117999999999999,-3.0649,-3.0053,-3.002400000000001,-3.001,-3.0012,-2.9967,-2.996599999999999,-2.9921,-2.994400000000001,-2.993399999999999,-2.9962,-2.9934,-2.9768,-2.9687,-2.966899999999999,-2.9635,-2.9565,-2.9479,-2.9383,-2.932799999999999,-2.911099999999999,-2.9095,-2.9057,-2.9016,-2.8964,-2.8897,-2.8814,-2.8847,-2.8841,-2.8777,-2.8801,-2.8693,-2.8689,-2.8645,-2.8606,-2.860799999999999,-2.8512,-2.8546,-2.8439,-2.839999999999999,-2.8406,-2.8393,-2.8375,-2.834,-2.831,-2.8298,-2.8323,-2.8301,-2.8232,-2.8251,-2.817,-2.8125,-2.8138,-2.81,-2.8065,-2.8003,-2.801600000000001,-2.7992,-2.7959,-2.7914,-2.7937,-2.7875,-2.7856,-2.7869,-2.7836,-2.7805,-2.7788,-2.7799,-2.7764,-2.774999999999999,-2.7703,-2.7737,-2.7666,-2.7676,-2.762,-2.7638,-2.758500000000001,-2.7551,-2.752,-2.7489,-2.7467,-2.7522,-2.7518,-2.7565,-2.7569,-2.7589,-2.7603,-2.7605,-2.7654,-2.7594,-2.7543,-2.7546,-2.75,-2.7572,-2.7636,-2.7454,-2.7372,-2.7285,-2.7175,-2.7175,-2.7062,-2.6997,-2.6975,-2.6868,-2.6824,-2.674799999999999,-2.668800000000001,-2.6604,-2.6555,-2.6546,-2.6489,-2.6496,-2.6467,-2.6423,-2.637799999999999,-2.6434,-2.6629,-2.665999999999999,-2.6745,-2.6846,-2.6973,-2.7115,-2.732200000000001,-2.7344,-2.7502,-2.7526,-2.7523,-2.7492,-2.751100000000001,-2.7549,-2.7563,-2.761200000000001,-2.7618,-2.7721,-2.7841,-2.7906,-2.7929,-2.7924,-2.7981,-2.7992,-2.8031,-2.8357,-2.8399,-2.8421,-2.8477,-2.8576,-2.867,-2.8761,-2.879599999999999,-2.8828,-2.8801,-2.8773,-2.8791,-2.8857,-2.89,-2.890200000000001,-2.8879,-2.8886,-2.8937,-2.9034,-2.9171,-2.9247,-2.9392,-2.9535,-2.9611,-2.965,-2.9888,-2.9928,-3.0037,-3.0138,-3.0221,-3.0334,-3.051800000000001,-3.070199999999999,-3.077900000000001,-3.1002,-3.1197,-3.1394,-3.1468,-3.1522,-3.1672,-3.1857,-3.196299999999999,-3.1994,-3.2029,-3.2094,-3.2169,-3.228899999999999,-3.2297,-3.2321,-3.2379,-3.2551,-3.2543,-3.233099999999999,-3.2124,-3.2028,-3.1853,-3.1842,-3.166799999999999,-3.159,-3.164,-3.167500000000001,-3.166300000000001,-3.1599,-3.1386,-3.1405,-3.134799999999999,-3.1327,-3.1329,-3.120499999999999,-3.117999999999999,-3.1259,-3.1346,-3.1415,-3.1577,-3.1731,-3.1717,-3.1728,-3.1785,-3.1875,-3.2031,-3.212600000000001,-3.1999,-3.1986,-3.1934,-3.196,-3.216200000000001,-3.2268,-3.2348,-3.2464,-3.2465,-3.2633,-3.271199999999999,-3.2677,-3.2721,-3.2717,-3.2802,-3.286,-3.2835,-3.266500000000001,-3.266,-3.2612,-3.2576,-3.2476,-3.249,-3.2471,-3.2442,-3.2455,-3.2604,-3.2616,-3.2659,-3.269699999999999,-3.2754,-3.2753,-3.2859,-3.2922,-3.2952,-3.3089,-3.3161,-3.3204,-3.335,-3.3647,-3.387,-3.4041,-3.408100000000001,-3.410699999999999,-3.417800000000001,-3.4265,-3.437,-3.452999999999999,-3.4525,-3.4556,-3.4509,-3.4539,-3.4353,-3.434400000000001,-3.4313,-3.4328,-3.4296,-3.4299,-3.4167,-3.4169,-3.4133,-3.4128,-3.4006,-3.3993,-3.3938,-3.390600000000001,-3.381400000000001,-3.3749,-3.3264,-3.3207,-3.3052,-3.2967,-3.2889,-3.2851,-3.2799,-3.2624,-3.2575,-3.246,-3.2321,-3.1799],"lat":[38.45000000000001,38.4401,38.4388,38.4487,38.4783,38.41490000000001,38.4083,38.4094,38.4142,38.4181,38.4211,38.429,38.43220000000001,38.43670000000001,38.4436,38.45009999999999,38.4549,38.4622,38.46849999999999,38.4715,38.4686,38.47,38.4748,38.4715,38.4681,38.4701,38.4699,38.4645,38.46240000000001,38.4559,38.45269999999999,38.4566,38.45849999999999,38.4571,38.4627,38.46579999999999,38.47,38.4717,38.4702,38.47519999999999,38.4743,38.47849999999999,38.4809,38.4773,38.481,38.48410000000001,38.48440000000001,38.4773,38.4765,38.47809999999999,38.4861,38.4876,38.485,38.4874,38.494,38.4917,38.4959,38.4952,38.5031,38.4997,38.5039,38.5046,38.5015,38.5038,38.5078,38.5096,38.51209999999999,38.5157,38.5144,38.50940000000001,38.51070000000001,38.51610000000001,38.5168,38.51939999999999,38.5203,38.5283,38.53099999999999,38.53290000000001,38.5328,38.5357,38.5354,38.5376,38.5436,38.5435,38.5468,38.5505,38.5524,38.5549,38.5593,38.5593,38.5614,38.5684,38.5739,38.5791,38.59269999999999,38.6006,38.6156,38.62029999999999,38.6279,38.6245,38.6176,38.61630000000001,38.6222,38.62520000000001,38.6265,38.6254,38.6284,38.63550000000001,38.6442,38.6482,38.6493,38.6669,38.67150000000001,38.6808,38.693,38.6998,38.7155,38.7201,38.7347,38.7464,38.75359999999999,38.7589,38.76159999999999,38.7744,38.7834,38.786,38.78190000000001,38.7953,38.8071,38.81480000000001,38.8232,38.83160000000001,38.84840000000001,38.8581,38.8678,38.8687,38.88040000000001,38.8851,38.88779999999999,38.8916,38.8978,38.9056,38.9058,38.9081,38.9082,38.906,38.90839999999999,38.9148,38.9206,38.92740000000001,38.9288,38.9255,38.93639999999999,38.9385,38.9532,38.95620000000001,38.9605,38.9612,38.96509999999999,38.96790000000001,38.9698,38.97229999999999,38.97350000000001,38.98520000000001,38.9724,38.9697,38.95929999999999,38.95480000000001,38.956,38.9595,38.9643,38.9636,38.968,38.97520000000001,38.97730000000001,38.9837,38.989,39.01,39.01430000000001,39.0132,39.0187,39.0308,39.03890000000001,39.0413,39.036,39.0258,39.0253,39.017,39.0164,39.0199,39.0174,39.0095,39.0102,39.0061,39.0019,38.9996,38.9938,38.9865,38.97669999999999,38.9667,38.9678,38.97,38.97429999999999,38.9681,38.95940000000001,38.95870000000001,38.9551,38.95330000000001,38.955,38.9339,38.9303,38.9255,38.9207,38.9173,38.899,38.896,38.8958,38.8914,38.8877,38.87960000000001,38.8764,38.871,38.8743,38.8761,38.8781,38.8769,38.8591,38.8525,38.8432,38.8286,38.81020000000001,38.8086,38.80540000000001,38.806,38.80199999999999,38.8014,38.7992,38.7882,38.7867,38.7795,38.7768,38.7648,38.762,38.7635,38.75809999999999,38.7582,38.7604,38.74270000000001,38.7381,38.7264,38.7224,38.7159,38.7121,38.7095,38.7071,38.7077,38.7059,38.6947,38.684,38.6832,38.679,38.675,38.6782,38.6759,38.6873,38.693,38.6921,38.68719999999999,38.6835,38.6741,38.6673,38.6673,38.6489,38.62769999999999,38.6214,38.6117,38.6069,38.6049,38.5864,38.5788,38.5714,38.5579,38.5491,38.53830000000001,38.52570000000001,38.5147,38.51219999999999,38.5096,38.5046,38.4995,38.4952,38.4885,38.4848,38.4753,38.4821,38.48,38.47929999999999,38.4706,38.4704,38.4646,38.46040000000001,38.45940000000001,38.4574,38.4577,38.4548,38.45000000000001]}],[{"lng":[-2.8211,-2.8167,-2.8098,-2.8068,-2.809200000000001,-2.8059,-2.8076,-2.8049,-2.8156,-2.8224,-2.8284,-2.8485,-2.859999999999999,-2.8743,-2.9083,-2.9256,-2.9188,-2.9039,-2.9031,-2.895900000000001,-2.8922,-2.8878,-2.8583,-2.852100000000001,-2.8528,-2.8671,-2.881,-2.8764,-2.8721,-2.8736,-2.8725,-2.8707,-2.8654,-2.8586,-2.8439,-2.8381,-2.837400000000001,-2.8322,-2.8261,-2.8211],"lat":[39.0232,39.0253,39.0239,39.0434,39.0543,39.06989999999999,39.0717,39.07900000000001,39.0941,39.09270000000001,39.0891,39.0889,39.0871,39.0901,39.0926,39.0989,39.0796,39.0667,39.0616,39.05250000000001,39.0448,39.0252,39.02640000000001,39.02219999999999,39.01850000000001,38.997,38.9858,38.969,38.9681,38.9628,38.96,38.9657,38.96660000000001,38.9751,38.9875,39.0038,39.0139,39.0233,39.0232,39.0232]}]],[[{"lng":[-4.2603,-4.2543,-4.2507,-4.25,-4.245100000000001,-4.2324,-4.209800000000001,-4.1885,-4.1821,-4.1793,-4.1713,-4.1671,-4.159500000000001,-4.1614,-4.1586,-4.1568,-4.1471,-4.138199999999999,-4.1319,-4.1333,-4.114,-4.1127,-4.1053,-4.103,-4.1088,-4.1064,-4.1122,-4.1119,-4.116400000000001,-4.114300000000001,-4.1139,-4.1057,-4.106600000000001,-4.1023,-4.0893,-4.079500000000001,-4.0726,-4.0652,-4.0653,-4.0704,-4.0762,-4.074400000000001,-4.0667,-4.0622,-4.060900000000001,-4.0234,-4.008,-3.9989,-3.963000000000001,-3.9373,-3.934400000000001,-3.9135,-3.9029,-3.888,-3.8676,-3.8327,-3.8067,-3.802,-3.778399999999999,-3.7624,-3.7656,-3.765699999999999,-3.769,-3.770900000000001,-3.7652,-3.757299999999999,-3.7513,-3.7527,-3.7441,-3.744699999999999,-3.7568,-3.7656,-3.7928,-3.8099,-3.8127,-3.8153,-3.828199999999999,-3.8372,-3.8416,-3.857200000000001,-3.8759,-3.9004,-3.9145,-3.9269,-3.965400000000001,-3.9668,-3.9657,-3.9584,-3.9588,-3.9661,-3.9654,-3.968199999999999,-3.964600000000001,-3.9684,-3.9677,-3.971900000000001,-3.9721,-4.0012,-4.0254,-4.0415,-4.047000000000001,-4.0733,-4.0805,-4.0858,-4.1043,-4.108600000000001,-4.114099999999999,-4.1154,-4.1204,-4.1279,-4.135400000000001,-4.1407,-4.148,-4.1478,-4.1427,-4.1428,-4.132400000000001,-4.135,-4.1278,-4.1297,-4.120399999999999,-4.1203,-4.1162,-4.118,-4.1085,-4.1036,-4.099900000000001,-4.0812,-4.0756,-4.068,-4.064199999999999,-4.0645,-4.0621,-4.058700000000001,-4.063399999999999,-4.0631,-4.0676,-4.065,-4.068,-4.0597,-4.0498,-4.041999999999999,-4.0405,-4.03,-4.039800000000001,-4.0377,-4.039500000000001,-4.0397,-4.041700000000001,-4.072199999999999,-4.0818,-4.0894,-4.1013,-4.1245,-4.1357,-4.1451,-4.1492,-4.1586,-4.166400000000001,-4.1931,-4.196000000000001,-4.2029,-4.2044,-4.242,-4.244,-4.2568,-4.2734,-4.2979,-4.3205,-4.3276,-4.344800000000001,-4.3595,-4.3771,-4.3952,-4.4043,-4.4092,-4.421100000000001,-4.4245,-4.4229,-4.432000000000001,-4.4435,-4.4465,-4.453000000000001,-4.4594,-4.4625,-4.4615,-4.4802,-4.4832,-4.4833,-4.4851,-4.4881,-4.4957,-4.500600000000001,-4.506700000000001,-4.511100000000001,-4.503300000000001,-4.501600000000001,-4.491799999999999,-4.4834,-4.4821,-4.4938,-4.5043,-4.5213,-4.5223,-4.5253,-4.527,-4.531199999999999,-4.528300000000001,-4.5301,-4.534700000000001,-4.531,-4.542400000000001,-4.542600000000001,-4.5609,-4.5625,-4.56,-4.559600000000001,-4.5545,-4.557499999999999,-4.567299999999999,-4.567800000000001,-4.5854,-4.590200000000001,-4.6183,-4.613899999999999,-4.614600000000001,-4.6115,-4.618000000000001,-4.640400000000001,-4.659600000000001,-4.687600000000001,-4.6862,-4.6817,-4.677699999999999,-4.6728,-4.6694,-4.6721,-4.6831,-4.6877,-4.6878,-4.693000000000001,-4.6953,-4.6942,-4.7041,-4.709899999999999,-4.705899999999999,-4.7066,-4.713699999999999,-4.734699999999999,-4.7609,-4.7545,-4.7315,-4.7336,-4.7134,-4.714299999999999,-4.7108,-4.705100000000001,-4.7081,-4.689600000000001,-4.6872,-4.682500000000001,-4.677599999999999,-4.672300000000001,-4.665100000000001,-4.6632,-4.6633,-4.6492,-4.6475,-4.6489,-4.661499999999999,-4.6752,-4.6764,-4.714299999999999,-4.742400000000001,-4.7735,-4.8102,-4.8091,-4.813099999999999,-4.8211,-4.8313,-4.831400000000001,-4.8386,-4.8451,-4.8535,-4.8549,-4.853600000000001,-4.858000000000001,-4.856,-4.857100000000001,-4.8696,-4.8743,-4.858299999999999,-4.8357,-4.825700000000001,-4.817600000000001,-4.8158,-4.806899999999999,-4.7916,-4.7763,-4.7666,-4.763400000000001,-4.758,-4.7488,-4.740100000000001,-4.7326,-4.730099999999999,-4.719999999999999,-4.7103,-4.705,-4.7004,-4.701699999999999,-4.6811,-4.6808,-4.6757,-4.657,-4.6453,-4.6072,-4.595700000000001,-4.590799999999999,-4.5748,-4.5524,-4.5209,-4.4977,-4.4963,-4.475,-4.4761,-4.4795,-4.4796,-4.4654,-4.4645,-4.460400000000001,-4.443900000000001,-4.4301,-4.424799999999999,-4.4009,-4.3922,-4.3809,-4.378,-4.375799999999999,-4.3715,-4.3678,-4.3649,-4.360799999999999,-4.3553,-4.348499999999999,-4.3432,-4.3306,-4.3205,-4.3125,-4.3091,-4.3093,-4.307000000000001,-4.306400000000001,-4.298199999999999,-4.2973,-4.2786,-4.2767,-4.2705,-4.2603],"lat":[38.9371,38.95960000000001,38.9667,38.97469999999999,38.9761,38.9706,38.9711,38.9681,38.9685,38.9736,38.9754,38.9977,39.0038,39.0063,39.0107,39.0125,39.01530000000001,39.01430000000001,39.0157,39.0233,39.03790000000001,39.0421,39.0466,39.0503,39.0549,39.0581,39.0669,39.0793,39.0858,39.0869,39.09,39.09239999999999,39.0955,39.1029,39.1047,39.1141,39.112,39.11490000000001,39.1194,39.125,39.1273,39.1324,39.1369,39.13760000000001,39.1399,39.1503,39.15020000000001,39.1536,39.1547,39.1584,39.1601,39.1581,39.1552,39.1545,39.14820000000001,39.1422,39.1343,39.1345,39.1416,39.1524,39.1573,39.1923,39.2002,39.2139,39.2121,39.2136,39.2248,39.2618,39.2738,39.2828,39.29010000000001,39.2933,39.2923,39.2881,39.2862,39.2792,39.26900000000001,39.2669,39.2596,39.2585,39.26209999999999,39.2795,39.2843,39.2841,39.2982,39.2994,39.301,39.3072,39.31019999999999,39.3165,39.3192,39.3235,39.3309,39.3325,39.3426,39.3473,39.3522,39.3515,39.3583,39.3579,39.3606,39.36540000000001,39.36020000000001,39.34950000000001,39.3411,39.3487,39.3479,39.3565,39.3626,39.3655,39.363,39.364,39.36280000000001,39.3666,39.37250000000001,39.37649999999999,39.3969,39.4004,39.4089,39.41389999999999,39.4355,39.4459,39.4506,39.4569,39.46020000000001,39.4592,39.4554,39.45170000000001,39.4525,39.4571,39.4623,39.46690000000001,39.4672,39.4722,39.4769,39.4797,39.4858,39.4935,39.5018,39.5219,39.5225,39.5207,39.5219,39.522,39.5592,39.5657,39.56770000000001,39.5742,39.57540000000001,39.5722,39.5681,39.5692,39.5658,39.5636,39.5652,39.5692,39.5734,39.5768,39.5669,39.4954,39.4928,39.4906,39.4882,39.4779,39.4793,39.4808,39.47969999999999,39.4845,39.4834,39.4877,39.49009999999999,39.49549999999999,39.496,39.50219999999999,39.5036,39.5063,39.507,39.5093,39.5122,39.519,39.52310000000001,39.5181,39.5173,39.4925,39.48930000000001,39.4786,39.4858,39.4884,39.4925,39.4935,39.5019,39.5078,39.51860000000001,39.522,39.5221,39.5279,39.53510000000001,39.5382,39.5356,39.5388,39.5449,39.5465,39.5559,39.5614,39.5615,39.5574,39.5557,39.54730000000001,39.5421,39.53810000000001,39.5316,39.53830000000001,39.544,39.5337,39.5307,39.5271,39.51649999999999,39.5108,39.5069,39.50239999999999,39.49730000000001,39.49689999999999,39.49980000000001,39.4847,39.4853,39.4659,39.46020000000001,39.45440000000001,39.4498,39.4539,39.4503,39.4415,39.4368,39.4354,39.4267,39.42449999999999,39.4127,39.4007,39.3928,39.3858,39.3824,39.3764,39.3736,39.36449999999999,39.34579999999999,39.33059999999999,39.32769999999999,39.3287,39.3267,39.32079999999999,39.3115,39.2549,39.2526,39.2443,39.2422,39.2271,39.2138,39.2099,39.204,39.2024,39.193,39.1918,39.1873,39.1861,39.1842,39.1793,39.172,39.1687,39.1649,39.1662,39.1707,39.1696,39.1876,39.1945,39.18950000000001,39.1994,39.1979,39.191,39.18089999999999,39.1761,39.16420000000001,39.16390000000001,39.1614,39.1517,39.14730000000001,39.141,39.1347,39.1317,39.1227,39.1135,39.099,39.0769,39.07090000000001,39.0626,39.0735,39.0737,39.0703,39.05889999999999,39.0589,39.066,39.07090000000001,39.0697,39.07950000000001,39.08420000000001,39.0823,39.07820000000001,39.0801,39.0802,39.0785,39.0679,39.061,39.0637,39.0658,39.0639,39.0629,39.0582,39.0549,39.0484,39.0489,39.0374,39.03360000000001,39.0154,38.9977,38.9937,38.9681,38.9609,38.95510000000001,38.94860000000001,38.9533,38.9577,38.9602,38.9631,38.9627,38.9609,38.9696,38.9708,38.96469999999999,38.9647,38.9586,38.9593,38.95800000000001,38.965,38.967,38.9685,38.9681,38.9708,38.9707,38.96770000000001,38.9694,38.96670000000001,38.9595,38.95830000000001,38.9536,38.9537,38.9551,38.9506,38.94310000000001,38.93790000000001,38.9371]}]],[[{"lng":[-4.8688,-4.8707,-4.866999999999999,-4.851299999999999,-4.841099999999999,-4.8061,-4.7774,-4.748199999999999,-4.751900000000001,-4.7557,-4.7589,-4.755100000000001,-4.751299999999999,-4.7424,-4.738099999999999,-4.7288,-4.7076,-4.697899999999999,-4.6877,-4.686199999999999,-4.6762,-4.671500000000001,-4.6563,-4.6507,-4.657300000000001,-4.6566,-4.6529,-4.6524,-4.648899999999999,-4.6463,-4.647800000000001,-4.6442,-4.640400000000001,-4.617,-4.6104,-4.6061,-4.6068,-4.604400000000001,-4.606699999999999,-4.601600000000001,-4.603199999999999,-4.5993,-4.6018,-4.608999999999999,-4.600000000000001,-4.6027,-4.5952,-4.594000000000001,-4.5862,-4.5672,-4.5618,-4.5584,-4.5551,-4.5519,-4.5523,-4.533999999999999,-4.529699999999999,-4.5284,-4.5217,-4.5154,-4.5109,-4.5042,-4.4796,-4.4795,-4.4761,-4.475,-4.4963,-4.4977,-4.5209,-4.5524,-4.5748,-4.590799999999999,-4.595700000000001,-4.6072,-4.6453,-4.657,-4.6757,-4.6808,-4.6811,-4.701699999999999,-4.7004,-4.705,-4.7103,-4.730099999999999,-4.7326,-4.740100000000001,-4.7488,-4.758,-4.763400000000001,-4.7666,-4.7763,-4.7833,-4.7916,-4.806899999999999,-4.817600000000001,-4.8322,-4.8327,-4.8386,-4.8424,-4.849099999999999,-4.8525,-4.8609,-4.8685,-4.875,-4.8822,-4.9027,-4.9145,-4.9361,-4.9485,-4.962400000000001,-4.961799999999999,-4.9512,-4.945199999999999,-4.937100000000001,-4.9368,-4.9336,-4.9181,-4.9133,-4.905,-4.8935,-4.8903,-4.8916,-4.8765,-4.872800000000001,-4.851800000000001,-4.8429,-4.843700000000001,-4.832900000000001,-4.831,-4.837000000000001,-4.841,-4.845800000000001,-4.8425,-4.8477,-4.8652,-4.8896,-4.8997,-4.9148,-4.9191,-4.924100000000001,-4.9279,-4.9345,-4.9434,-4.944400000000001,-4.953499999999999,-4.958600000000001,-4.957600000000001,-4.9608,-4.9607,-4.9681,-4.9727,-4.9832,-4.9899,-5.003899999999999,-5.0096,-5.016500000000001,-5.0387,-5.046799999999999,-5.0326,-5.0246,-5.0171,-5.007900000000001,-5.0019,-5.0003,-5.000800000000001,-5.004499999999999,-4.964799999999999,-4.936100000000001,-4.923,-4.9187,-4.904499999999999,-4.892100000000001,-4.8845,-4.8769,-4.8688],"lat":[38.681,38.6749,38.6598,38.6576,38.6515,38.6382,38.633,38.63800000000001,38.6646,38.6732,38.69349999999999,38.7054,38.70850000000001,38.7061,38.7179,38.7217,38.7235,38.7182,38.722,38.72379999999999,38.7202,38.71670000000001,38.7116,38.72450000000001,38.7243,38.7266,38.7286,38.7339,38.7348,38.738,38.7426,38.7472,38.74969999999999,38.7507,38.7557,38.757,38.7696,38.7742,38.78390000000001,38.7965,38.8003,38.8046,38.8235,38.8341,38.8384,38.8723,38.8857,38.898,38.9027,38.909,38.9083,38.9141,38.9139,38.9173,38.9197,38.9281,38.9313,38.9349,38.9368,38.94169999999999,38.942,38.9491,38.94860000000001,38.95510000000001,38.9609,38.9681,38.9937,38.9977,39.0154,39.03360000000001,39.0374,39.0489,39.0484,39.0549,39.0582,39.0629,39.0639,39.0658,39.0637,39.061,39.0679,39.0785,39.0802,39.07820000000001,39.0823,39.08420000000001,39.07950000000001,39.0697,39.07090000000001,39.066,39.0589,39.05799999999999,39.05889999999999,39.0703,39.0735,39.0515,39.04619999999999,39.0448,39.0476,39.0455,39.0388,39.0318,39.034,39.032,39.0329,39.041,39.0486,39.0568,39.0563,39.0587,39.0524,39.0307,39.0088,38.9972,38.98570000000001,38.9756,38.9571,38.9607,38.9633,38.96,38.9569,38.9529,38.9478,38.9488,38.94730000000001,38.9451,38.9402,38.93930000000001,38.9356,38.9297,38.9202,38.8997,38.8953,38.88210000000001,38.88700000000001,38.8866,38.8891,38.8875,38.88019999999999,38.8768,38.86999999999999,38.86490000000001,38.85439999999999,38.8472,38.83,38.8104,38.80360000000001,38.79660000000001,38.78979999999999,38.776,38.7609,38.7515,38.7398,38.733,38.7352,38.7355,38.7333,38.7291,38.7254,38.7265,38.7189,38.7152,38.7082,38.7012,38.6968,38.69509999999999,38.6856,38.6814,38.6823,38.6861,38.6868,38.6851,38.68780000000001,38.6861,38.681]}]],[[{"lng":[-4.751100000000001,-4.7513,-4.762400000000001,-4.7797,-4.7859,-4.810900000000001,-4.848,-4.863,-4.8721,-4.879600000000001,-4.888800000000001,-4.8915,-4.898099999999999,-4.899200000000001,-4.9029,-4.908100000000001,-4.9108,-4.910900000000001,-4.926800000000001,-4.941699999999999,-4.940600000000001,-4.933800000000001,-4.932000000000001,-4.9214,-4.9123,-4.9091,-4.9057,-4.903,-4.903,-4.9006,-4.8865,-4.882,-4.876500000000001,-4.8708,-4.8681,-4.863299999999999,-4.861200000000001,-4.8564,-4.855499999999999,-4.853100000000001,-4.8492,-4.8463,-4.844500000000001,-4.8319,-4.813300000000001,-4.810599999999999,-4.7958,-4.7887,-4.775600000000001,-4.7639,-4.7553,-4.7565,-4.7536,-4.7661,-4.7678,-4.767199999999999,-4.752100000000001,-4.7435,-4.7404,-4.7498,-4.745799999999999,-4.747,-4.7427,-4.7438,-4.751100000000001],"lat":[39.49880000000001,39.5014,39.51400000000001,39.5201,39.5253,39.5298,39.5521,39.5562,39.544,39.5384,39.5266,39.5191,39.5121,39.5063,39.5037,39.4937,39.4862,39.4792,39.4338,39.4012,39.39510000000001,39.3954,39.388,39.38750000000001,39.38,39.3785,39.3798,39.37880000000001,39.3752,39.3742,39.37060000000001,39.3729,39.37180000000001,39.3683,39.37500000000001,39.37499999999999,39.3793,39.381,39.3789,39.3791,39.3816,39.3791,39.3796,39.38940000000001,39.3944,39.3965,39.3969,39.39880000000001,39.3969,39.4051,39.4157,39.4197,39.42540000000001,39.4239,39.429,39.433,39.4486,39.4523,39.4562,39.4684,39.4726,39.4753,39.4876,39.4894,39.49880000000001]}]],[[{"lng":[-4.276299999999999,-4.273900000000001,-4.2714,-4.2688,-4.2703,-4.2719,-4.2703,-4.2721,-4.2742,-4.2744,-4.276200000000001,-4.2785,-4.2761,-4.276400000000001,-4.2724,-4.2675,-4.255399999999999,-4.247299999999999,-4.2231,-4.1884,-4.1754,-4.156,-4.1448,-4.1339,-4.1284,-4.1129,-4.111800000000001,-4.0926,-4.0865,-4.0779,-4.07,-4.0581,-4.0556,-4.028300000000001,-4.013700000000001,-4.0063,-3.989399999999999,-3.9618,-3.9501,-3.944300000000001,-3.9124,-3.905899999999999,-3.8963,-3.8747,-3.864,-3.8607,-3.859799999999999,-3.8542,-3.838000000000001,-3.8305,-3.8324,-3.8299,-3.8242,-3.818000000000001,-3.816599999999999,-3.807700000000001,-3.8011,-3.785500000000001,-3.7648,-3.739599999999999,-3.7299,-3.6992,-3.6516,-3.620400000000001,-3.6017,-3.5981,-3.585700000000001,-3.5862,-3.583,-3.577999999999999,-3.5672,-3.552500000000001,-3.5424,-3.535099999999999,-3.532,-3.5326,-3.5349,-3.533199999999999,-3.528,-3.5283,-3.5058,-3.496100000000001,-3.4854,-3.4775,-3.472500000000001,-3.4531,-3.4422,-3.4385,-3.4331,-3.4247,-3.4229,-3.4094,-3.4018,-3.389400000000001,-3.376599999999999,-3.375300000000001,-3.3802,-3.380300000000001,-3.377699999999999,-3.3748,-3.3749,-3.381400000000001,-3.390600000000001,-3.3938,-3.3993,-3.4006,-3.4128,-3.4133,-3.4169,-3.4167,-3.4299,-3.4296,-3.4328,-3.432900000000001,-3.438,-3.4547,-3.471200000000001,-3.4934,-3.5195,-3.5331,-3.5317,-3.5396,-3.544299999999999,-3.5529,-3.5527,-3.5607,-3.5747,-3.579299999999999,-3.584499999999999,-3.5886,-3.5973,-3.6078,-3.6201,-3.628000000000001,-3.6561,-3.6501,-3.647200000000001,-3.653099999999999,-3.6521,-3.6711,-3.6912,-3.692799999999999,-3.7018,-3.7145,-3.712,-3.7133,-3.711999999999999,-3.7074,-3.704,-3.6994,-3.6975,-3.6982,-3.7014,-3.7069,-3.7087,-3.7168,-3.7216,-3.7254,-3.7336,-3.7456,-3.7545,-3.759199999999999,-3.768199999999999,-3.7785,-3.785800000000001,-3.8126,-3.8209,-3.8292,-3.831,-3.8387,-3.845,-3.8482,-3.8515,-3.856100000000001,-3.8579,-3.8736,-3.878,-3.8852,-3.8958,-3.9016,-3.9195,-3.9129,-3.9129,-3.9027,-3.892,-3.888,-3.874,-3.8666,-3.8474,-3.8295,-3.8265,-3.8126,-3.8111,-3.791599999999999,-3.791100000000001,-3.7938,-3.7941,-3.7979,-3.805199999999999,-3.8165,-3.821699999999999,-3.830000000000001,-3.8295,-3.835700000000001,-3.8514,-3.8619,-3.8625,-3.866400000000001,-3.8796,-3.884,-3.8893,-3.8911,-3.8942,-3.9223,-3.9287,-3.9313,-3.9269,-3.9343,-3.9339,-3.939499999999999,-3.9394,-3.944999999999999,-3.9478,-3.957,-3.9575,-3.973,-3.975299999999999,-3.9807,-4.0001,-4.010000000000001,-4.010399999999999,-4.026799999999999,-4.0427,-4.0456,-4.0552,-4.0621,-4.075499999999999,-4.0817,-4.086200000000001,-4.1041,-4.123100000000001,-4.1237,-4.1285,-4.1262,-4.189600000000001,-4.211999999999999,-4.2155,-4.2285,-4.2302,-4.2353,-4.239,-4.2459,-4.252699999999999,-4.2582,-4.2618,-4.276699999999999,-4.2814,-4.2993,-4.3022,-4.3121,-4.3136,-4.3218,-4.3227,-4.325200000000001,-4.3352,-4.345600000000001,-4.349799999999999,-4.3549,-4.3569,-4.3589,-4.3618,-4.3657,-4.366299999999999,-4.3728,-4.3775,-4.382199999999999,-4.3876,-4.3879,-4.3916,-4.3892,-4.3827,-4.3793,-4.3796,-4.375,-4.3735,-4.3712,-4.369199999999999,-4.3645,-4.3562,-4.350000000000001,-4.3363,-4.3307,-4.327,-4.3228,-4.3114,-4.2995,-4.2964,-4.279000000000001,-4.2673,-4.2649,-4.2601,-4.2562,-4.2452,-4.2456,-4.2603,-4.2705,-4.2767,-4.2786,-4.2973,-4.298199999999999,-4.306400000000001,-4.307000000000001,-4.3093,-4.3091,-4.3125,-4.3205,-4.3306,-4.3432,-4.348499999999999,-4.3553,-4.3649,-4.3678,-4.3715,-4.375799999999999,-4.378,-4.3809,-4.3922,-4.4009,-4.424799999999999,-4.4301,-4.443900000000001,-4.460400000000001,-4.4645,-4.4654,-4.4796,-4.5042,-4.5109,-4.5154,-4.5217,-4.5284,-4.529699999999999,-4.533999999999999,-4.5523,-4.5519,-4.5551,-4.5584,-4.5618,-4.5672,-4.5862,-4.594000000000001,-4.5952,-4.6027,-4.600000000000001,-4.608999999999999,-4.6018,-4.5993,-4.603199999999999,-4.601600000000001,-4.606699999999999,-4.604400000000001,-4.6068,-4.6061,-4.6104,-4.617,-4.640400000000001,-4.6442,-4.647800000000001,-4.6463,-4.648899999999999,-4.6524,-4.6529,-4.6566,-4.657300000000001,-4.6507,-4.6563,-4.671500000000001,-4.6762,-4.686199999999999,-4.6877,-4.697899999999999,-4.7076,-4.7288,-4.738099999999999,-4.7424,-4.751299999999999,-4.755100000000001,-4.7589,-4.7557,-4.751900000000001,-4.748199999999999,-4.7774,-4.8061,-4.841099999999999,-4.851299999999999,-4.866999999999999,-4.868,-4.8639,-4.8671,-4.8635,-4.8601,-4.8526,-4.8351,-4.823300000000001,-4.818700000000001,-4.801499999999999,-4.7874,-4.768399999999999,-4.7559,-4.747299999999999,-4.7333,-4.719199999999999,-4.707300000000001,-4.704899999999999,-4.705,-4.701299999999999,-4.7006,-4.7054,-4.703,-4.6957,-4.679399999999999,-4.6671,-4.650100000000001,-4.6397,-4.6332,-4.6222,-4.6203,-4.6213,-4.6187,-4.618900000000001,-4.6111,-4.608499999999999,-4.596,-4.593600000000001,-4.5883,-4.5859,-4.5765,-4.5717,-4.5657,-4.5637,-4.559,-4.558300000000001,-4.5512,-4.5414,-4.5344,-4.5217,-4.5132,-4.5058,-4.5006,-4.4964,-4.4949,-4.4871,-4.4831,-4.471199999999999,-4.464300000000001,-4.462,-4.4564,-4.452899999999999,-4.4351,-4.4294,-4.417,-4.4096,-4.4063,-4.3949,-4.3886,-4.384,-4.3338,-4.3319,-4.3274,-4.3242,-4.3219,-4.319799999999999,-4.3173,-4.311800000000001,-4.3095,-4.3027,-4.296099999999999,-4.2942,-4.2897,-4.2872,-4.2788,-4.276,-4.276299999999999],"lat":[38.3509,38.3503,38.34650000000001,38.34720000000001,38.3556,38.3562,38.358,38.3654,38.36670000000001,38.3722,38.3729,38.3775,38.3836,38.39090000000001,38.3923,38.39840000000001,38.40179999999999,38.39840000000001,38.39739999999999,38.3899,38.3846,38.38140000000001,38.3865,38.3845,38.3795,38.37969999999999,38.3823,38.3803,38.3768,38.3772,38.3797,38.37889999999999,38.3774,38.3753,38.3717,38.3681,38.36990000000001,38.36610000000001,38.369,38.3672,38.3691,38.3717,38.3717,38.377,38.3764,38.37550000000001,38.3734,38.3752,38.3858,38.3929,38.39970000000001,38.4128,38.4163,38.4157,38.41899999999999,38.4218,38.42,38.4253,38.4244,38.414,38.4244,38.4129,38.405,38.394,38.39880000000001,38.3985,38.4056,38.4334,38.4515,38.4504,38.4521,38.4466,38.4457,38.43939999999999,38.43110000000001,38.4263,38.4233,38.4151,38.411,38.4087,38.408,38.4038,38.4041,38.4015,38.398,38.4002,38.40440000000001,38.40440000000001,38.40809999999999,38.4068,38.4109,38.4241,38.424,38.4334,38.4396,38.4418,38.4455,38.4506,38.465,38.4697,38.4753,38.4848,38.4885,38.4952,38.4995,38.5046,38.5096,38.51219999999999,38.5147,38.52570000000001,38.53830000000001,38.5491,38.5579,38.5649,38.5674,38.56830000000001,38.5712,38.57840000000001,38.5758,38.5798,38.58560000000001,38.61,38.6164,38.6222,38.6267,38.6362,38.64459999999999,38.6534,38.6574,38.6638,38.6661,38.672,38.66740000000001,38.6524,38.6433,38.6359,38.62769999999999,38.6163,38.6118,38.59830000000001,38.5808,38.56979999999999,38.5656,38.5546,38.5532,38.54740000000001,38.5456,38.5431,38.5368,38.5363,38.5346,38.5315,38.5271,38.5246,38.521,38.5152,38.5093,38.4997,38.4943,38.4649,38.46419999999999,38.4664,38.4744,38.4758,38.4806,38.4896,38.49019999999999,38.4937,38.4925,38.4936,38.4979,38.49589999999999,38.4989,38.5001,38.5129,38.5198,38.5197,38.5272,38.5298,38.52800000000001,38.534,38.5388,38.5441,38.557,38.55909999999999,38.5641,38.5662,38.5866,38.5848,38.5807,38.577,38.5727,38.59059999999999,38.6076,38.6114,38.6136,38.6168,38.62230000000001,38.62939999999999,38.6342,38.6403,38.64600000000001,38.6495,38.656,38.65730000000001,38.6638,38.6615,38.6599,38.65570000000001,38.6557,38.6509,38.6465,38.6448,38.6362,38.637,38.6439,38.6536,38.6635,38.6727,38.6774,38.6806,38.6906,38.692,38.6918,38.6905,38.69090000000001,38.6923,38.68969999999999,38.6926,38.69109999999999,38.6896,38.6895,38.6925,38.69779999999999,38.7009,38.70120000000001,38.6981,38.7,38.699,38.7094,38.70800000000001,38.7262,38.7352,38.7452,38.7597,38.75789999999999,38.7602,38.7608,38.7624,38.7603,38.7631,38.7761,38.7799,38.7804,38.7838,38.7844,38.7864,38.7892,38.7925,38.79170000000001,38.7944,38.7948,38.7996,38.8013,38.8039,38.80380000000001,38.80569999999999,38.8135,38.8142,38.8119,38.8126,38.8179,38.82409999999999,38.8325,38.8307,38.8358,38.8362,38.84030000000001,38.8458,38.8474,38.8486,38.8466,38.8447,38.844,38.8457,38.8447,38.8467,38.84610000000001,38.8529,38.8507,38.8555,38.8541,38.8603,38.8614,38.8712,38.8781,38.88399999999999,38.8963,38.9023,38.9114,38.917,38.9182,38.9264,38.928,38.9371,38.93790000000001,38.94310000000001,38.9506,38.9551,38.9537,38.9536,38.95830000000001,38.9595,38.96670000000001,38.9694,38.96770000000001,38.9707,38.9708,38.9681,38.9685,38.965,38.95800000000001,38.9593,38.9586,38.9647,38.96469999999999,38.9708,38.9696,38.9609,38.9627,38.9631,38.9602,38.9577,38.9533,38.94860000000001,38.9491,38.942,38.94169999999999,38.9368,38.9349,38.9313,38.9281,38.9197,38.9173,38.9139,38.9141,38.9083,38.909,38.9027,38.898,38.8857,38.8723,38.8384,38.8341,38.8235,38.8046,38.8003,38.7965,38.78390000000001,38.7742,38.7696,38.757,38.7557,38.7507,38.74969999999999,38.7472,38.7426,38.738,38.7348,38.7339,38.7286,38.7266,38.7243,38.72450000000001,38.7116,38.71670000000001,38.7202,38.72379999999999,38.722,38.7182,38.7235,38.7217,38.7179,38.7061,38.70850000000001,38.7054,38.69349999999999,38.6732,38.6646,38.63800000000001,38.633,38.6382,38.6515,38.6576,38.6598,38.6477,38.6401,38.6299,38.6189,38.614,38.6131,38.6075,38.59759999999999,38.5959,38.5948,38.5971,38.5868,38.58570000000001,38.5797,38.57469999999999,38.57099999999999,38.57200000000001,38.5701,38.56380000000001,38.5627,38.56,38.55520000000001,38.5526,38.5495,38.5467,38.54780000000001,38.5354,38.5319,38.5252,38.5235,38.5211,38.5177,38.5124,38.5086,38.5002,38.4947,38.4901,38.4864,38.4864,38.4928,38.4934,38.48749999999999,38.49079999999999,38.48479999999999,38.4821,38.4766,38.4773,38.4819,38.4695,38.4628,38.4641,38.4576,38.4455,38.4434,38.4407,38.4396,38.4331,38.426,38.41690000000001,38.4105,38.4069,38.40089999999999,38.4023,38.396,38.3945,38.3849,38.3832,38.3872,38.3859,38.3823,38.3654,38.36070000000001,38.36349999999999,38.3608,38.3628,38.362,38.357,38.3575,38.353,38.3504,38.3502,38.3471,38.3474,38.3428,38.3477,38.3479,38.3509]}]]],null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":["#FDAD90","#FD9B7B","#CF1D1F","#F34C35","#AD1117","#FFF5F0","#67000D"],"fillOpacity":0.2,"smoothFactor":1,"noClip":false},["Com: n.a. (79) <br>Prevalence: 0.1 <br>Number of farms: 10","Com: n.a. (80) <br>Prevalence: 0.118811881188119 <br>Number of farms: 101","Com: n.a. (81) <br>Prevalence: 0.25 <br>Number of farms: 16","Com: n.a. (82) <br>Prevalence: 0.199115044247788 <br>Number of farms: 226","Com: n.a. (83) <br>Prevalence: 0.288732394366197 <br>Number of farms: 142","Com: n.a. (84) <br>Prevalence: 0 <br>Number of farms: 1","Com: n.a. (85) <br>Prevalence: 0.340080971659919 <br>Number of farms: 247"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[38.3428,39.5768],"lng":[-5.046799999999999,-2.637799999999999]}},"evals":[],"jsHooks":[]}</script>
<!-- 

## Change the map extent

Most of the data is concentrated in a specific region and its hard to see it clear, for this we will zoom in into the region with our points. We can use the function `lims()` to specify the x and y limits of our map. We will define the limits based on the bounding box of the captures data and save this to an object so we can use it later

# Scatter pie 

https://rdrr.io/cran/scatterpie/man/geom_scatterpie.html


```r
# Example ----------
library(ggplot2)
library(scatterpie)
d <- data.frame(x=rnorm(5), y=rnorm(5))
d$A <- abs(rnorm(5, sd=1))
d$B <- abs(rnorm(5, sd=2))
d$C <- abs(rnorm(5, sd=3))

ggplot() +
  geom_scatterpie(aes(x=x, y=y), data=d, cols=c("A", "B", "C")) +
  coord_fixed()

# my data ---------
d <- captures %>%
  mutate(noTreat = captures - treated) %>%
  group_by(lon, lat) %>%
  summarise(treated = sum(treated), noTreat = sum(noTreat), captures = sum(captures))

ggplot() +
  geom_sf(data = Area) +
  geom_scatterpie(aes(x=lon, y=lat, r = scales::rescale(captures, to = c(0.02, 0.05))), data=d, cols=c('treated', 'noTreat'), color = NA, alpha = 0.5) +
  theme_void() +
  mapLims
```



```r
library(ggplot2)
d <- data.frame(x=rnorm(5), y=rnorm(5))
d$A <- abs(rnorm(5, sd=1))
d$B <- abs(rnorm(5, sd=2))
d$C <- abs(rnorm(5, sd=3))
ggplot() +
  geom_scatterpie(aes(x=x, y=y), data=d, cols=c("A", "B", "C")) +
  coord_fixed()

d <- tidyr::gather(d, key="letters", value="value", -x:-y)

ggplot() +
  geom_scatterpie(aes(x=x, y=y), data=d, cols="letters", long_format=TRUE) +
  coord_fixed()
```



```r
d <- captures %>%
  group_by(lat, lon) %>%
  summarise(captures = sum(captures), treated = sum(treated)) %>%
  mutate(id = 1:n())

ggplot() +
  geom_sf(data = Area) +
  geom_scatterpie(mapping = aes(x = lon, y = lat, group = id),
                  data = d, color = NA, alpha = 0.5,
                  cols = c('captures', 'treated')) +
  scale_fill_manual(values = c('red','blue')) +
  bbox +
  theme_void()
```


```r
i <- 69

# Vector
vec <- ggplot() +
  geom_sf(data = Area[i,],fill = '#CCFCDC', col = 'grey10', linewidth = 1.5) +
  theme_void()

ggsave(vec, filename = 'slides/img/GIS_vector.png')

poly <- st_coordinates(Area[i,]) %>%
  data.frame() %>%
  # slice(1:10) %>%
  st_as_sf(coords = c('X', 'Y'), crs = st_crs(4326)) %>%
  ggplot() +
  geom_sf(data = Area[i,],fill = '#CCFCDC', col = 'grey70', linewidth = 1) +
  geom_sf(col = 'grey10') +
  theme_void()

ggsave(poly, filename = 'slides/img/GIS_poly.png')

# Raster
sr <- stars::st_as_stars(MxAlt) %>% # first we convert to the stars format
  st_crop(., Area[i,]) # we will crop the raster to get only our study area

ras <- ggplot() +
  geom_stars(data = sr) +
  scale_fill_gradient(low = 'black', high = '#CCFCDC', na.value = NA) +
  theme_void() +
  theme(legend.position = 'none') +
  coord_fixed()

ggsave(ras, filename = 'slides/img/GIS_raster.png')
```




```r
bb <- st_bbox(Area) %>% st_as_sfc()

ggplot() +
  geom_sf(data = bb, fill = NA, lwd = 1, col = "red3") +
  geom_sf(data = Area) +
  theme_bw()
  
ggsave("s/img/w8/bbox.png", width = 7, height = 5)
```



```r
library(stnet)
# Loading the spatial data from the package
MxSp <- st_read(system.file("data/MxShp.shp", package = "stnet")) 
# Filtrar solo al area de estudio
Area <- MxSp %>% # Estos son los datos que usamos
  filter(CVE_ENT %in% c('15', '12', '16')) %>% # Filtramos en base a los codigos de municipio
  st_transform(crs = st_crs(4326))
MxAlt <- raster::getData('alt', country='MEX')
# Convertir el formato
Mxst <- stars::st_as_stars(MxAlt) %>% # Primero convertimos a formato stars
  st_crop(., Area) # Ahora cortaremos el raster para obtener solo el area de estudio

data('captures')
capturesSp <- captures %>% 
  st_as_sf(
    coords = c('lon', 'lat'), # Aqui van los nombres de las variables para coords
    crs = st_crs(4326) # Especificar el CRS de las coordenadas
  )

ggplot() + # call the ggplot2 function
  geom_stars(data = Mxst) + # Add a layer for the raster
  geom_sf(data = Area, fill = NA, col = 'grey60') + # Add the polygon
  geom_sf(data = capturesSp, cex = 0.3, col = 'skyblue') + # Add the points
  theme_void() + # theme for the plot
  scale_fill_gradient(low = 'black', high = 'red', na.value = NA) + # color for the gradient
  labs(title = 'Map of the study area', fill = 'Altitude') # labels for the figure

ggsave("s/img/w8/8p01.png", bg = "white", width = 9, height = 5)
```

-->
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
